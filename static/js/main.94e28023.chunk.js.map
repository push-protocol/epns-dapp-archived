{"version":3,"sources":["helpers/CryptoHelper.js","connectors.ts","hooks.ts","../../contracts/src/addresses.js","../../contracts/src/index.js","helpers/EPNSCoreHelper.js","segments/ChannelDashboard.js","segments/CreateChannel.js","segments/Feedbox.tsx","components/DisplayNotice.js","assets/Device.js","singletons/ChannelsDataStore.js","singletons/UsersDataStore.js","components/ViewChannelItem.js","segments/ViewChannels.tsx","pages/Home.js","components/BlockiesIdenticon.js","components/Profile.tsx","components/Bell.js","segments/Header.tsx","App.tsx","serviceWorker.js","index.js","components/blockies.js"],"names":["CryptoJS","require","CryptoHelper","encryptWithAES","message","key","AES","encrypt","toString","decryptWithAES","decrypt","enc","Utf8","encryptWithECIES","publicKey","a","compressedKey","EthCrypto","compress","this","encryptWithPublicKey","encryptedSecret","decryptWithECIES","privateKey","decryptWithPrivateKey","pubKeyUint8Array","Uint8Array","from","Buffer","convertedKeyAsUint8Array","publicKeyConvert","convertedPublicKeyHex","pubKey","then","encryptedBuffers","cipher","iv","ephemPublicKey","ciphertext","mac","input","keyConvert","concat","buf","encrypted","length","keyConvertBuffer","uncompressedKey","twoStripped","substring","encryptedBuffer","decryptedBuffer","encryptionDecryptionPublicToPrivateTest","startTime","Date","console","log","publicKeyByPrivateKey","msg","encryptionTime","getTime","decryptMsg","decryptionTime","outputMsgPayload","secret","subject","calltoaction","imageurl","pkey","secretEncrypted","asubE","amsgE","actaE","aimgE","makeid","result","toISOString","characters","charactersLength","i","charAt","Math","floor","random","config","injected","InjectedConnector","supportedChainIds","network","NetworkConnector","urls","3","defaultChainId","pollingInterval","portis","PortisConnector","dAppId","networks","addresses","ceaErc20","epnscore","dai","aDai","abis","erc20","erc20Abi","ownable","ownableAbi","epnscoreAbi","EPNSCoreHelper","getOwnerInfo","contract","Promise","resolve","reject","owner","response","catch","err","getUserInfo","user","users","mappings","addr","getChannelAddressFromID","channelID","mapAddressChannels","getChannelInfo","channel","channels","getChannelAddEvent","startBlock","endBlock","queryFilter","filteredResponse","forEach","item","args","getJsonFileFromIPFSHash","ipfs","fetch","json","getChannelJsonFromChannelAddress","channelStartBlock","toNumber","getChannelJsonFromUserAddress","getTotalNumberOfChannels","channelsCount","getChannelsMetaLatestToOldest","atIndex","numChannels","channelsInfo","channelArrays","assignedChannelID","push","promises","map","all","getTotalNumberOfUsers","usersCount","getPublicKey","address","getSubscribedStatus","memberExists","getTotalSubscribedChannels","subscribedCount","getFairShareOfUserAtBlock","block","calcAllChannelsRatio","getPoolFunds","poolFunds","formatBigNumberToMetric","bignumber","convertToCurrency","div","metricFormatter","e","num","digits","si","value","symbol","toFixed","replace","ethers","Container","styled","Channel","Notice","Title","h1","Info","label","Buttons","FormSubmision","Input","ShortInfo","textarea","Row","Text","span","Header","Continue","button","props","theme","ChannelDashboard","useWeb3React","account","active","error","library","chainId","React","useState","processing","setProcessing","recipient","setRecipient","type","setType","sub","setSub","setMsg","cta","setCTA","img","setImg","useEffect","handleSendMessage","signer","getSigner","Contract","nsub","nmsg","parseInt","k","publickey","esub","emsg","ecta","eimg","JSON","stringify","at","add","cid","sendMessage","tx","placeholder","onChange","target","maxlength","disabled","onClick","color","height","width","Name","Url","DropzoneContainer","CreateChannel","uploadDone","setUploadDone","undefined","file","setFile","name","setName","desc","setDesc","url","setURL","handleCreateChannel","daiContract","randomNumber","ceil","fees","parseUnits","sendTransactionPromise","approve","waitForTransaction","hash","createChannelWithFees","onChangeStatus","status","meta","onSubmit","files","allFiles","f","reader","FileReader","readAsDataURL","onloadend","onDrop","maxFiles","multiple","accept","InterestInfo","InterestRow","Msg","css","Feedbox","epnsReadProvider","userInterestInfo","setUserInterestInfo","initUserInterest","getBlockNumber","blockNumber","calculateUserInterest","on","contractInstance","divisor","ratio","userInfo","interestClaimed","adaiERC20","balanceOf","availableFunds","totalProfit","userProfit","mul","formatEther","obj","pool","Number","available","profit","DisplayNotice","title","animationIn","animationOut","durationOut","size","Device","mobileS","mobileM","mobileL","tablet","laptop","laptopL","desktop","desktopL","ChannelEvents","ChannelsDataStore","state","channelsMeta","channelsJson","callbacks","init","resetChannelsListeners","initChannelsListenersAsync","getChannelsCountAsync","removeAllListeners","listenForAddChannelAnyAsync","listenForAddChannelSelfAsync","listenForUpdateChannelAnyAsync","listenForUpdateChannelSelfAsync","listenForSubscribeAnyAsync","listenForSubscribeSelfAsync","listenForUnsubscribeAnyAsync","listenForUnsubscribeSelfAsync","filter","filters","AddChannel","incrementChannelsCountAsync","Object","entries","callback","UpdateChannel","Subscribe","count","memberCount","bigNumberify","Unsubscribe","addCallbacks","callbackType","callbackID","removeCallbacks","incrementCount","getChannelsMetaAsync","channelsDummy","getChannelMetaAsync","id","sort","b","channelAddress","getChannelMetaViaAddressAsync","getChannelJsonAsync","instance","UserEvents","UsersDataStore","userMeta","ownerMeta","resetUsersListeners","initUsersListenersAsync","getOwnerMetaAsync","getUsersCountAsync","getUserMetaAsync","listenForSubscribedAsync","listenForUnsubscribedAsync","publicKeyRegistered","listenForPublicKeyBroadcastAsync","PublicKeyRegistered","once","incrementUsersCountAsync","SkeletonWrapper","atW","atH","borderRadius","marginBottom","marginRight","ChannelLogo","ChannelLogoOuter","ChannelLogoInner","ChannelLogoImg","ChannelInfo","ChannelTitle","ChannelTitleLink","ChannelDesc","ChannelDescLabel","ChannelMeta","ChannelMetaBox","Subscribers","SubscribersCount","Pool","PoolShare","LineBreak","ChannelActions","ChannelActionButton","ActionTitle","hideit","ActionLoader","SkeletonButton","SubscribeButton","UnsubscribeButton","OwnerButton","Toaster","ToasterMsg","ViewChannelItem","channelObject","isOwner","epnsWriteProvide","channelJson","setChannelJson","subscribed","setSubscribed","loading","setLoading","txInProgress","setTxInProgress","fetchChannelJson","registerCallbacks","subs","subscribe","subscribeAction","signMessage","signature","recoverPublicKey","arrayify","hashMessage","formattedPubKey","slice","toast","dark","position","autoClose","hideProgressBar","closeOnClick","pauseOnHover","draggable","progress","withPublicKey","subscribeWithPublicKey","txToast","LoaderToast","update","render","TYPE","SUCCESS","ERROR","unsubscribeAction","unsubscribe","src","icon","href","rel","info","poolContribution","ContainerInfo","Items","ViewChannels","setChannels","setUser","setOwner","fetchChannels","ownerAddr","keys","index","channellized","Controls","ControlButton","border","ControlImage","ControlText","ControlChannelContainer","ControlChannelImage","ControlChannelText","Interface","Home","setBadgeCount","bellPressed","ReactGA","pageview","setEpnsReadProvider","epnsWriteProvider","setEpnsWriteProvider","controlAt","setControlAt","adminStatusLoaded","setAdminStatusLoaded","channelAdmin","setChannelAdmin","signerInstance","userClickedAt","checkUserForChannelRights","controlIndex","listenerForChannelRights","BlockiesIdenticon","seed","opts","bgcolor","scale","spotcolor","draw","prevProps","blockies","canvas","createElement","ref","Component","Blocky","BlockyInner","Wallet","Profile","setAddress","ens","setENS","ensFetched","setENSFetched","lookupAddress","toLowerCase","tadaaa","keyframes","BellImage","ringme","BellImageAbs","Badge","Bell","badgeCount","bellPressedCB","badge","setBadge","ring","setRing","setResetRinger","setTimeout","className","HeaderStyle","ProfileContainer","Logo","UserControls","NetworkDisplayer","PrimaryTheme","ThirdTheme","Connection","phase","Array","NoEthereumProviderError","UnsupportedChainIdError","UserRejectedRequestErrorInjected","getErrorMessage","dotenv","connectorsByName","Injected","Network","Portis","getLibrary","provider","connector","providers","Web3Provider","App","context","activate","deactivate","setBellPressed","initialize","activatingConnector","setActivatingConnector","triedEager","tried","setTried","isAuthorized","useEagerConnect","suppress","ethereum","window","handleConnect","handleChainChanged","handleAccountsChanged","accounts","handleNetworkChanged","networkId","removeListener","useInactiveListener","HeaderContainer","ParentContainer","HomeContainer","ProviderUpperContainer","ProviderLogo","ProviderContainer","currentConnector","activating","image","ProviderButton","ProviderImage","ProviderLabel","style","display","gridGap","gridTemplateColumns","maxWidth","margin","marginTop","borderColor","cursor","alert","changeChainId","changeNetwork","close","newestOnTop","rtl","pauseOnFocusLoss","ToastContainer","attrs","Boolean","location","hostname","match","client","ApolloClient","uri","ReactDOM","document","getElementById","navigator","serviceWorker","ready","registration","unregister","randseed","rand","t","createColor","buildOpts","newOpts","pow","charCodeAt","seedrand","renderIcon","imageData","dataWidth","mirrorWidth","data","y","row","x","r","reverse","createImageData","sqrt","cc","getContext","fillStyle","fillRect","col","api","create","module","exports"],"mappings":"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","file":"static/js/main.94e28023.chunk.js","sourcesContent":["import EthCrypto from 'eth-crypto';\nimport {encrypt, decrypt} from 'eccrypto';\nimport { publicKeyConvert, publicKeyVerify } from 'secp256k1-v4';\n\nvar CryptoJS = require(\"crypto-js\");\n\nconst CryptoHelper = {\n  // To Encrypt with AES\n  encryptWithAES: function(message, key) {\n    return CryptoJS.AES.encrypt(message, key).toString();\n  },\n  // To Decrypt with AES\n  decryptWithAES: function(message, key) {\n    let bytes  = CryptoJS.AES.decrypt(message, key);\n    return bytes.toString(CryptoJS.enc.Utf8);\n  },\n  // To Form Encryted Secret, no more than 15 characters supported\n  encryptWithECIES: async function(message, publicKey) {\n    const compressedKey = EthCrypto.publicKey.compress(publicKey);\n\n    const encryptedSecret = await this.encryptWithPublicKey(message, compressedKey);\n\n    // Not using it since sqlite2 has some error with this\n    // const compressedEncryptedSecret = EthCrypto.hex.compress(encryptedSecret);\n\n    return encryptedSecret;\n  },\n  // To Form Decrypted Secret, no more than 15 characters supported\n  decryptWithECIES: async function(message, privateKey) {\n    // Message is always compressed, not using because sqlite2 has some error with this\n    //const uncompressedMessage = EthCrypto.hex.decompress(message).substr(2); // to remove 0x\n\n    return await this.decryptWithPrivateKey(message, privateKey);\n  },\n  // Encryption with public key\n  encryptWithPublicKey: async function(message, publicKey) {\n    // Convert compressed public key, starts with 03 or 04\n    const pubKeyUint8Array = Uint8Array.from(\n      new Buffer(publicKey, 'hex')\n    );\n    //console.log(\"[ENCRYPTION] Public Key Uint8Array: \" + pubKeyUint8Array);\n\n    const convertedKeyAsUint8Array = publicKeyConvert(pubKeyUint8Array, false);\n    //console.log(\"[ENCRYPTION] Public Key Converted: \" + convertedKeyAsUint8Array);\n\n    const convertedPublicKeyHex = new Buffer(convertedKeyAsUint8Array);\n    //console.log(\"[ENCRYPTION] Converted Public Key Buffer: \" + convertedPublicKeyHex);\n\n    const pubKey = new Buffer(convertedPublicKeyHex, 'hex');\n    //console.log(\"[ENCRYPTION] pubkey getting sentout for encrypt: \" + pubKey);\n\n    return encrypt(\n        pubKey,\n        Buffer(message)\n    ).then(encryptedBuffers => {\n      const cipher = {\n          iv: encryptedBuffers.iv.toString('hex'),\n          ephemPublicKey: encryptedBuffers.ephemPublicKey.toString('hex'),\n          ciphertext: encryptedBuffers.ciphertext.toString('hex'),\n          mac: encryptedBuffers.mac.toString('hex')\n      };\n      // use compressed key because it's smaller\n      // const compressedKey = new Buffer.from(publicKeyConvert(Web3Helper.getUint8ArrayFromHexStr(cipher.ephemPublicKey), true)).toString('hex')\n      const input = Uint8Array.from(\n        new Buffer(cipher.ephemPublicKey, 'hex')\n      );\n      const keyConvert = publicKeyConvert(input, true)\n      // console.log(\"[ENCRYPTION] Coverted key: \" + keyConvert);\n\n      const keyConvertBuffer = new Buffer(keyConvert);\n      // console.log(\"[ENCRYPTION] Coverted key in buffer : \" + keyConvertBuffer);\n      // console.log(keyConvertBuffer);\n\n      //console.log(keyConvert);\n      const compressedKey = keyConvertBuffer.toString('hex')\n      // console.log(\"[ENCRYPTION] Compressed key in buffer : \");\n      // console.log(compressedKey);\n\n      const ret = Buffer.concat([\n        new Buffer(cipher.iv, 'hex'), // 16bit\n        new Buffer(compressedKey, 'hex'), // 33bit\n        new Buffer(cipher.mac, 'hex'), // 32bit\n        new Buffer(cipher.ciphertext, 'hex') // var bit\n      ]).toString('hex')\n\n      return ret\n    });\n  },\n  // Decryption with public key\n  decryptWithPrivateKey: async function(message, privateKey) {\n    let encrypted = message;\n    const buf = new Buffer(encrypted, 'hex');\n    // console.log(\"[DECRYPTION] Buffer Passed: \" + buf);\n\n    encrypted = {\n      iv: buf.toString('hex', 0, 16),\n      ephemPublicKey: buf.toString('hex', 16, 49),\n      mac: buf.toString('hex', 49, 81),\n      ciphertext: buf.toString('hex', 81, buf.length)\n    };\n    // decompress publicKey\n    // encrypted.ephemPublicKey = new Buffer.from(publicKeyConvert(Web3Helper.getUint8ArrayFromHexStr(encrypted.ephemPublicKey), true)).toString('hex')\n    const input = Uint8Array.from(new Buffer(encrypted.ephemPublicKey, 'hex'));\n    const keyConvert = publicKeyConvert(input, false)\n    // console.log(\"[DECRYPTION] Coverted key: \" + keyConvert);\n\n    const keyConvertBuffer = new Buffer(keyConvert);\n    // console.log(\"[DECRYPTION] Coverted key in buffer : \" + keyConvertBuffer);\n    // console.log(keyConvertBuffer);\n\n    //console.log(keyConvert);\n    const uncompressedKey = keyConvertBuffer.toString('hex')\n    // console.log(\"[DECRYPTION] Uncompressed key in buffer : \");\n    // console.log(uncompressedKey);\n\n    encrypted.ephemPublicKey = uncompressedKey;\n    const twoStripped = privateKey.substring(2)\n\n    const encryptedBuffer = {\n      iv: new Buffer(encrypted.iv, 'hex'),\n      ephemPublicKey: new Buffer(encrypted.ephemPublicKey, 'hex'),\n      ciphertext: new Buffer(encrypted.ciphertext, 'hex'),\n      mac: new Buffer(encrypted.mac, 'hex')\n    };\n\n    return decrypt(\n      new Buffer(twoStripped, 'hex'),\n      encryptedBuffer\n    ).then(decryptedBuffer => decryptedBuffer.toString());\n  },\n  // Testing of Encryption and Decryption from Public to Private key\n  encryptionDecryptionPublicToPrivateTest: async function(privateKey) {\n    const startTime = new Date();\n    console.log(\"[ENCRYPTION / DECRYPTION TEST STARTED] - \" + startTime);\n\n    const publicKey = EthCrypto.publicKeyByPrivateKey(privateKey);\n    const compressedKey = EthCrypto.publicKey.compress(publicKey); // is String\n    //console.log(compressedKey);\n\n    // const bytesCompKey = Uint8Array.from(compressedKey);\n    //console.log(bytesCompKey);\n\n    const msgToEncrypt = \"PartialStringAS\";\n    const msg = await this.encryptWithPublicKey(msgToEncrypt, compressedKey);\n    console.log(\"Encryped Message With compressed public key:\" + msg);\n\n    const encryptionTime = new Date().getTime() - startTime.getTime();\n    console.log(\"[ENCRYPTION / DECRYPTION ENCRYPTION DONE] - \" + encryptionTime / 1000 + \" secs\");\n\n    // Decrypt this message\n    const decryptMsg = await this.decryptWithPrivateKey(msg, privateKey);\n    console.log(\"[ENCRYPTION / DECRYPTION DECRYPTED MESSAGE] - '\" + decryptMsg + \"'\");\n\n    const decryptionTime = new Date().getTime() - startTime.getTime() - encryptionTime;\n    console.log(\"[ENCRYPTION / DECRYPTION DECRYPTION DONE] - \" + decryptionTime / 1000 + \" secs\");\n  },\n  // To output messge payload if required\n  outputMsgPayload: async function(secret, subject, message, calltoaction, imageurl, pkey) {\n    // Output AES\n    console.log(\"[AES ENCRYTED FORMAT (\" + new Date() + \")\");\n    console.log(\"---------------------\");\n    console.log(\"secret --> \");\n    const secretEncrypted = await this.encryptWithECIES(secret, pkey);\n    const asubE = this.encryptWithAES(subject, secret);\n    const amsgE = this.encryptWithAES(message, secret);\n    const actaE = this.encryptWithAES(calltoaction, secret);\n    const aimgE = this.encryptWithAES(imageurl, secret);\n\n    console.log(secretEncrypted);\n    console.log(\"asub --> \");\n    console.log(asubE);\n    console.log(\"amsg --> \");\n    console.log(amsgE);\n    console.log(\"acta --> \");\n    console.log(actaE);\n    console.log(\"aimg --> \");\n    console.log(aimgE);\n    console.log(\"decrypted secret --> \");\n    console.log(await this.decryptWithECIES(secretEncrypted, pkey));\n    console.log(\"decrypted asub --> \");\n    console.log(this.decryptWithAES(asubE, secret));\n    console.log(\"decrypted amsg --> \");\n    console.log(this.decryptWithAES(amsgE, secret));\n    console.log(\"decrypted acta --> \");\n    console.log(this.decryptWithAES(actaE, secret));\n    console.log(\"decrypted aimg --> \");\n    console.log(this.decryptWithAES(aimgE, secret));\n  },\n  makeid: function (length) {\n     var result           = '[' + new Date().toISOString() + '] ';\n     var characters       = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\n     var charactersLength = characters.length;\n     for ( var i = 0; i < length; i++ ) {\n        result += characters.charAt(Math.floor(Math.random() * charactersLength));\n     }\n     return result;\n  }\n};\n\nexport default CryptoHelper;\n","import { InjectedConnector } from '@web3-react/injected-connector'\nimport { PortisConnector } from '@web3-react/portis-connector'\nimport { NetworkConnector } from '@web3-react/network-connector'\n// import { WalletConnectConnector } from '@web3-react/walletconnect-connector'\n// import { WalletLinkConnector } from '@web3-react/walletlink-connector'\n// import { LedgerConnector } from '@web3-react/ledger-connector'\n// import { TrezorConnector } from '@web3-react/trezor-connector'\n// import { FrameConnector } from '@web3-react/frame-connector'\n// import { AuthereumConnector } from '@web3-react/authereum-connector'\n// import { FortmaticConnector } from '@web3-react/fortmatic-connector'\n// import { SquarelinkConnector } from '@web3-react/squarelink-connector'\n// import { TorusConnector } from '@web3-react/torus-connector'\n\nrequire('dotenv').config();\n\nconst POLLING_INTERVAL = 12000\nconst RPC_URLS: { [chainId: number]: string } = {\n  3: \"https://ropsten.infura.io/v3/084ddf3da9e240c5b5dd9264f37c0526\" as string\n}\n\nexport const injected = new InjectedConnector({ supportedChainIds: [3] })\n\nexport const network = new NetworkConnector({\n  urls: { 3: RPC_URLS[3] },\n  defaultChainId: 3,\n  pollingInterval: POLLING_INTERVAL\n})\n\n// export const walletconnect = new WalletConnectConnector({\n//   rpc: { 1: RPC_URLS[1] },\n//   bridge: 'https://bridge.walletconnect.org',\n//   qrcode: true,\n//   pollingInterval: POLLING_INTERVAL\n// })\n//\n// export const walletlink = new WalletLinkConnector({\n//   url: RPC_URLS[1],\n//   appName: 'web3-react example'\n// })\n//\n// export const ledger = new LedgerConnector({ chainId: 1, url: RPC_URLS[1], pollingInterval: POLLING_INTERVAL })\n//\n// export const trezor = new TrezorConnector({\n//   chainId: 1,\n//   url: RPC_URLS[1],\n//   pollingInterval: POLLING_INTERVAL,\n//   manifestEmail: 'dummy@abc.xyz',\n//   manifestAppUrl: 'http://localhost:1234'\n// })\n//\n// export const frame = new FrameConnector({ supportedChainIds: [1] })\n//\n// export const authereum = new AuthereumConnector({ chainId: 42 })\n//\n// export const fortmatic = new FortmaticConnector({ apiKey: process.env.FORTMATIC_API_KEY as string, chainId: 4 })\n\nexport const portis = new PortisConnector({ dAppId: 'cfefa032-9afd-4833-bfb4-2b0cb7ec3413' as string, networks: [1, 100] })\n\n// export const squarelink = new SquarelinkConnector({\n//   clientId: process.env.SQUARELINK_CLIENT_ID as string,\n//   networks: [1, 100]\n// })\n\n// export const torus = new TorusConnector({ chainId: 1 })\n","import { useState, useEffect } from 'react'\nimport { useWeb3React } from '@web3-react/core'\n\nimport { injected } from './connectors'\n\nrequire('dotenv').config();\n\nexport function useEagerConnect() {\n  const { activate, active } = useWeb3React()\n\n  const [tried, setTried] = useState(false)\n\n  useEffect(() => {\n    injected.isAuthorized().then((isAuthorized: boolean) => {\n      if (isAuthorized) {\n        activate(injected, undefined, true).catch(() => {\n          setTried(true)\n        })\n      } else {\n        setTried(true)\n      }\n    })\n  }, []) // intentionally only running on mount (make sure it's only mounted once :))\n\n  // if the connection worked, wait until we get confirmation of that to flip the flag\n  useEffect(() => {\n    if (!tried && active) {\n      setTried(true)\n    }\n  }, [tried, active])\n\n  return tried\n}\n\nexport function useInactiveListener(suppress: boolean = false) {\n  const { active, error, activate } = useWeb3React()\n\n  useEffect((): any => {\n    const { ethereum } = window as any\n    if (ethereum && ethereum.on && !active && !error && !suppress) {\n      const handleConnect = () => {\n        console.log(\"Handling 'connect' event\")\n        activate(injected)\n      }\n      const handleChainChanged = (chainId: string | number) => {\n        console.log(\"Handling 'chainChanged' event with payload\", chainId)\n        activate(injected)\n      }\n      const handleAccountsChanged = (accounts: string[]) => {\n        console.log(\"Handling 'accountsChanged' event with payload\", accounts)\n        if (accounts.length > 0) {\n          activate(injected)\n        }\n      }\n      const handleNetworkChanged = (networkId: string | number) => {\n        console.log(\"Handling 'networkChanged' event with payload\", networkId)\n        activate(injected)\n      }\n\n      ethereum.on('connect', handleConnect)\n      ethereum.on('chainChanged', handleChainChanged)\n      ethereum.on('accountsChanged', handleAccountsChanged)\n      ethereum.on('networkChanged', handleNetworkChanged)\n\n      return () => {\n        if (ethereum.removeListener) {\n          ethereum.removeListener('connect', handleConnect)\n          ethereum.removeListener('chainChanged', handleChainChanged)\n          ethereum.removeListener('accountsChanged', handleAccountsChanged)\n          ethereum.removeListener('networkChanged', handleNetworkChanged)\n        }\n      }\n    }\n  }, [active, error, suppress, activate])\n}\n","// This address points to a dummy ERC20 contract deployed on Ethereum Mainnet,\n// Goerli, Kovan, Rinkeby and Ropsten. Replace it with your smart contracts.\nconst addresses = {\n  ceaErc20: \"0xc1C0472c0C80bCcDC7F5D01A376Bd97a734B8815\",\n  epnscore: \"0xaf65ed42c0b6d5f8029e58729997df9f45895df7\",\n  dai: \"0xf80A32A835F79D7787E8a8ee5721D0fEaFd78108\",\n  aDai: \"0xcB1Fe6F440c49E9290c3eb7f158534c2dC374201\",\n};\n\nexport default addresses;\n","import erc20Abi from \"./abis/erc20\";\nimport ownableAbi from \"./abis/ownable\";\nimport epnscoreAbi from \"./abis/epnscore\";\n\nexport const abis = {\n  erc20: erc20Abi,\n  ownable: ownableAbi,\n  epnscore: epnscoreAbi,\n};\n\nexport { default as addresses } from \"./addresses\";\n","import React from \"react\";\n\nimport { addresses, abis } from \"@project/contracts\";\nimport { ethers } from \"ethers\";\nimport { parseEther, bigNumber } from 'ethers/utils'\n\n// FeedDB Helper Function\nconst EPNSCoreHelper = {\n  // To get owner info\n  getOwnerInfo: async (contract) => {\n    return new Promise ((resolve, reject) => {\n      // Get User Info from EPNS Core\n      contract.owner()\n        .then(response => { console.log(\"getOwnerInfo() --> %o\", response); resolve(response); })\n        .catch(err => { console.log(\"!!!Error, getOwnerInfo() --> %o\", err); reject(err); });\n    })\n  },\n  // To get user info\n  getUserInfo: async (user, contract) => {\n    return new Promise ((resolve, reject) => {\n      // Get User Info from EPNS Core\n      contract.users(user)\n        .then(response => {\n          const mappings = { ...response };\n          mappings.addr = user;\n\n          console.log(\"getUserInfo() --> %o\", mappings);\n          resolve(mappings);\n        })\n        .catch(err => { console.log(\"!!!Error, getUserInfo() --> %o\", err); reject(err); });\n    })\n  },\n  // To retrieve a channel address from it's id\n  getChannelAddressFromID: async (channelID, contract) => {\n    return new Promise ((resolve, reject) => {\n      // To get channel info from a channel address\n      contract.mapAddressChannels(channelID)\n        .then(response => {\n          console.log(\"getChannelAddressFromID() --> %o\", response.toString());\n          resolve(response.toString());\n        })\n        .catch(err => { console.log(\"!!!Error, getChannelAddressFromID() --> %o\", err); reject(err); });\n    })\n  },\n  // To retrieve a channel's Info from channel address\n  getChannelInfo: async (channel, contract) => {\n    return new Promise ((resolve, reject) => {\n      // To get channel info from a channel address\n      contract.channels(channel)\n        .then(response => {\n          // Add an extra field for future info\n          const mappings = { ...response };\n          mappings.addr = channel;\n\n          console.log(\"getChannelInfo() --> %o\", mappings);\n          resolve(mappings);\n        })\n        .catch(err => { console.log(\"!!!Error, getChannelInfo() --> %o\", err); reject(err); });\n    })\n  },\n  // To retrieve a channel's AddChannel event\n  getChannelAddEvent: async (channel, startBlock, endBlock, contract) => {\n    return new Promise ((resolve, reject) => {\n      // To get channel ipfs hash from channel info\n      contract.queryFilter('AddChannel', startBlock, endBlock)\n        .then(response => {\n\n          let filteredResponse;\n          response.forEach(function (item) {\n            if (item.args[0] == channel) {\n              filteredResponse = item;\n            }\n          });\n\n          console.log(\"getChannelAddEvent() --> %o\", filteredResponse);\n          resolve(filteredResponse);\n        })\n        .catch(err => { console.log(\"!!!Error, getChannelAddEvent() --> %o\", err); reject(err); });\n    })\n  },\n  // Retrive IPFS File from ipfshash\n  getJsonFileFromIPFSHash: async(ipfs) => {\n    return new Promise ((resolve, reject) => {\n      // Form Gateway URL\n      const url = \"https://ipfs.io/ipfs/\" + ipfs;\n      fetch(url)\n        .then(response => response.json())\n        .then(response => {\n          console.log(\"getJsonFileFromIPFSHash() --> %o\", response);\n          resolve(response);\n        })\n        .catch(err => { console.log(\"!!!Error, getJsonFileFromIPFSHash() --> %o\", err); reject(err); });\n    });\n  },\n  // Helper to get Channel from Channel's address\n  getChannelJsonFromChannelAddress: async (channel, contract) => {\n    return new Promise ((resolve, reject) => {\n      // To get channel info from a channel address\n      EPNSCoreHelper.getChannelInfo(channel, contract)\n        .then(response => EPNSCoreHelper.getChannelAddEvent(channel, response.channelStartBlock.toNumber(), response.channelStartBlock.toNumber(), contract))\n        .then(response => EPNSCoreHelper.getJsonFileFromIPFSHash(response.args[1]))\n        .then(response => {console.log(\"getChannelJsonFromChannelAddress() --> %o\", response); resolve(response);})\n        .catch(err => {console.log(\"!!!Error, getChannelJsonFromChannelAddress() --> %o\", err); reject(err);});\n    });\n  },\n  // Helper to get Channel from User's address\n  getChannelJsonFromUserAddress: async (user, contract) => {\n    return new Promise ((resolve, reject) => {\n      // To get channel info from a channel address\n      EPNSCoreHelper.getUserInfo(user, contract)\n        .then(response => EPNSCoreHelper.getChannelJsonFromChannelAddress(user, contract))\n        .then(response => {console.log(\"getChannelJsonFromUserAddress() --> %o\", response); resolve(response);})\n        .catch(err => {console.log(\"!!!Error, getChannelJsonFromUserAddress() --> %o\", err); reject(err);});\n    });\n  },\n  // Get Total Number of Channels\n  getTotalNumberOfChannels: async (contract) => {\n    return new Promise ((resolve, reject) => {\n      // Get User Info from EPNS Core\n      contract.channelsCount()\n        .then(response => {\n          console.log(\"getTotalNumberOfChannels() --> %o\", response.toNumber());\n          resolve(response.toNumber());\n        })\n        .catch(err => { console.log(\"!!!Error, getTotalNumberOfChannels() --> %o\", err); reject(err); });\n    })\n  },\n  // Get channels address given number of channels, , atIndex: -1 is start from latest, numChannels: -1 is return all\n  getChannelsMetaLatestToOldest: async (atIndex, numChannels, contract) => {\n    return new Promise ((resolve, reject) => {\n      EPNSCoreHelper.getTotalNumberOfChannels(contract)\n        .then(async (response) => {\n          let channelsInfo = [];\n          const channelsCount = response;\n\n          if (atIndex > channelsCount || atIndex == -1) {\n            atIndex = channelsCount - 1;\n          }\n\n          if (numChannels == -1) {\n            numChannels = channelsCount;\n          }\n\n          // Get channels\n          let channelArrays = [];\n\n          // prefil and then refil\n          let count = 0;\n          for (let i = numChannels - 1; i >= 0; i--) {\n            const assignedChannelID = atIndex - i;\n            channelArrays.push(assignedChannelID);\n          }\n\n          const promises = channelArrays.map(async (channelID) => {\n            await EPNSCoreHelper.getChannelAddressFromID(channelID, contract)\n              .then(response => EPNSCoreHelper.getChannelInfo(response, contract))\n              .then(response => {\n                // console.log(\"getChannelsMetaLatestToOldest(%d, %d) --> %o\", channelID, numChannels, channelsInfo);\n                channelsInfo = [response, ...channelsInfo];\n              })\n              .catch(err => console.log(\"Error in channel: %d | skipping...\", channelID))\n          });\n\n          // wait until all promises are resolved\n          await Promise.all(promises);\n\n          console.log(\"getChannelsMetaLatestToOldest(Index: %d, Number: %d) --> %o\", atIndex, numChannels, channelsInfo);\n          resolve(channelsInfo);\n        })\n        .catch(err => { console.log(\"!!!Error, getChannelsMetaLatestToOldest() --> %o\", err); reject(err); })\n    });\n  },\n  // Get Total Number of Users\n  getTotalNumberOfUsers: async (contract) => {\n    return new Promise ((resolve, reject) => {\n      // Get User Info from EPNS Core\n      contract.usersCount()\n        .then(response => {\n          console.log(\"getTotalNumberOfUsers() --> %o\", response.toNumber());\n          resolve(response.toNumber());\n        })\n        .catch(err => { console.log(\"!!!Error, getTotalNumberOfUsers() --> %o\", err); reject(err); });\n    })\n  },\n  // To retrieve public key of a user\n  getPublicKey: async (address, contract) => {\n    return new Promise ((resolve, reject) => {\n      // To get channel ipfs hash from channel info\n      let filteredResponse;\n      contract.queryFilter('PublicKeyRegistered')\n        .then(response => {\n\n          response.forEach(function (item) {\n            if (item.args[0] == address) {\n              filteredResponse = item;\n            }\n          });\n\n          console.log(\"Full Response: \");\n          console.log(response);\n          console.log(\"Filtered Response: \");\n          console.log(filteredResponse);\n\n          if (filteredResponse.length == 0) {\n            reject()\n          }\n          else {\n            resolve(filteredResponse.args[1]);\n          }\n\n        })\n        .catch((err) => {\n          console.log(err);\n          reject(err);\n        });\n    })\n  },\n  // Get Total Subsbribed Channels\n  getSubscribedStatus: async (user, channel, contract) => {\n    return new Promise ((resolve, reject) => {\n      // Get User Info from EPNS Core\n      contract.memberExists(user, channel)\n        .then(response => {\n          console.log(\"getSubscribedStatus() --> %o\", response);\n          resolve(response);\n        })\n        .catch(err => { console.log(\"!!!Error, getSubscribedStatus() --> %o\", err); reject(err); });\n    })\n  },\n  // Get Total Subsbribed Channels\n  getTotalSubscribedChannels: async (user, contract) => {\n    return new Promise ((resolve, reject) => {\n      // Get User Info from EPNS Core\n      contract.users[user].subscribedCount()\n        .then(response => {\n          console.log(\"getTotalSubscribedChannels() --> %o\", response.toNumber());\n          resolve(response.toNumber());\n        })\n        .catch(err => { console.log(\"!!!Error, getTotalSubscribedChannels() --> %o\", err); reject(err); });\n    })\n  },\n  // Get Fair Share\n  getFairShareOfUserAtBlock: async(user, block, contract) => {\n    return new Promise ((resolve, reject) => {\n      // Get User Info from EPNS Core\n      contract.calcAllChannelsRatio(user, block)\n        .then(response => {\n          console.log(\"calcAllChannelsRatio() --> %o\", response);\n          resolve(response);\n        })\n        .catch(err => { console.log(\"!!!Error, calcAllChannelsRatio() --> %o\", err); reject(err); });\n    })\n  },\n  // Get Pool Funds\n  getPoolFunds: async(contract) => {\n    return new Promise ((resolve, reject) => {\n      contract.poolFunds()\n        .then(response => { console.log(\"getPoolFunds() --> %o\", response); resolve(response); })\n        .catch(err => { console.log(\"!!!Error, getPoolFunds() --> %o\", err); reject(err); });\n    })\n  },\n  // Helper Functions\n  // To format Big Number\n  formatBigNumberToMetric: (bignumber, convertToCurrency) => {\n    try {\n      if (convertToCurrency) {\n        bignumber = bignumber.div(100000000000000);\n        bignumber = bignumber.div(10000);\n      }\n      bignumber = bignumber.toNumber();\n      return EPNSCoreHelper.metricFormatter(bignumber, 2);\n    }\n    catch (e) {\n      console.log(e);\n      return \"---\";\n    }\n  },\n  // Metric Formatter, thanks: https://stackoverflow.com/questions/9461621/format-a-number-as-2-5k-if-a-thousand-or-more-otherwise-900\n  metricFormatter: (num, digits) => {\n    var si = [\n      { value: 1, symbol: \"\" },\n      { value: 1E3, symbol: \"k\" },\n      { value: 1E6, symbol: \"M\" },\n      { value: 1E9, symbol: \"G\" },\n      { value: 1E12, symbol: \"T\" },\n      { value: 1E15, symbol: \"P\" },\n      { value: 1E18, symbol: \"E\" }\n    ];\n    var rx = /\\.0+$|(\\.[0-9]*[1-9])0+$/;\n    var i;\n    for (i = si.length - 1; i > 0; i--) {\n      if (num >= si[i].value) {\n        break;\n      }\n    }\n    return (num / si[i].value).toFixed(digits).replace(rx, \"$1\") + si[i].symbol;\n  },\n\n}\n\nexport default EPNSCoreHelper;\n","import React from \"react\";\nimport styled, { css } from 'styled-components';\n\nimport Loader from 'react-loader-spinner'\nimport Switch from 'components/Switch'\nimport { bigNumberify } from 'ethers/utils'\n\nimport { useWeb3React, UnsupportedChainIdError } from '@web3-react/core'\n\nimport { addresses, abis } from \"@project/contracts\";\nimport EPNSCoreHelper from 'helpers/EPNSCoreHelper';\nimport CryptoHelper from 'helpers/CryptoHelper';\nconst ethers = require('ethers');\n\nconst ipfs = require('ipfs-api')()\n\n// Create Header\nfunction ChannelDashboard({ epnscore }) {\n  const { active, error, account, library, chainId } = useWeb3React();\n\n  const [processing, setProcessing] = React.useState(false);\n\n  const [recipient, setRecipient] = React.useState('');\n  const [secret, setSecret] = React.useState('');\n  const [type, setType] = React.useState('');\n  const [sub, setSub] = React.useState('');\n  const [msg, setMsg] = React.useState('');\n  const [cta, setCTA] = React.useState('');\n  const [img, setImg] = React.useState('');\n\n  React.useEffect(() => {\n\n  });\n\n  const handleSendMessage = async () => {\n    // Check everything in order\n    // skip this for now\n    setProcessing(true);\n\n    var signer = library.getSigner(account);\n    let contract = new ethers.Contract(epnscore, abis.epnscore, signer);\n\n    let nsub = sub;\n    let nmsg = msg;\n    let secretEncrypted;\n\n    let esub;\n    let emsg;\n    let ecta;\n    let eimg;\n\n    if (type === \"2\" || parseInt(type) == 2) {\n      // Create secret\n      let secret = CryptoHelper.makeid(14);\n\n      // Encrypt payload and change sub and msg in notification\n      nsub = \"You have a secret message!\";\n      nmsg = \"Open the app to see your secret message!\";\n\n      // get public key from EPNSCoreHelper\n      let k = await EPNSCoreHelper.getPublicKey(recipient, contract);\n\n      let publickey = k.toString().substring(2);\n      console.log(\"This is public Key: \" + publickey);\n\n      secretEncrypted = await CryptoHelper.encryptWithECIES(secret, publickey);\n      esub = CryptoHelper.encryptWithAES(sub, secret);\n      emsg = CryptoHelper.encryptWithAES(msg, secret);\n      ecta = CryptoHelper.encryptWithAES(cta, secret);\n      eimg = CryptoHelper.encryptWithAES(img, secret);\n    }\n\n    const input = JSON.stringify(\n      {\n        \"notification\": {\n          \"title\": nsub,\n          \"body\": nmsg\n        },\n        \"data\": {\n          \"type\": type,\n          \"secret\": secretEncrypted,\n          \"asub\": esub,\n          \"amsg\": emsg,\n          \"acta\": ecta,\n          \"aimg\": eimg\n        }\n      }\n    )\n    const ipfs = require(\"nano-ipfs-store\").at(\"https://ipfs.infura.io:5001\");\n\n    console.log(\"sending payload\");\n    const cid = await ipfs.add(input);\n    console.log(\"IPFS cid:\", cid);\n    //console.log(await ipfs.cat(cid));\n\n    // Send Transaction\n    // First Approve DAI\n    var anotherSendTxPromise = contract.sendMessage(recipient, type, cid, 1);\n\n    anotherSendTxPromise.then(function(tx) {\n      console.log(tx);\n      console.log(\"Check: \" + account);\n\n    });\n  }\n\n  return (\n    <Container>\n      <Channel>\n        <Notice>\n          <Title>Send Message!</Title>\n          <Info>EPNS supports three types of messages (for now!). <b>Groups</b>, <b>Secrets</b> and <b>Targetted</b>.</Info>\n          <Info>Group messages go to all people subscribed in the group. Secrets are encrypted and go to a specific subscriber (no one else can view it, thanks crypto!), Targetted are non-encrypted secrets mostly sent from the EPNS group to channel owners.</Info>\n        </Notice>\n\n        <FormSubmision>\n          <Row>\n            <Header>Message Type</Header>\n            <Input placeholder=\" (1 for Normal, 2 for Secret)\" value={type} onChange={(e) => {setType(e.target.value)}} />\n          </Row>\n\n          <Row>\n            <Header>Recipient</Header>\n            <Input placeholder=\"Channel Address for msg type 1, recipient for 2\" value={recipient} onChange={(e) => {setRecipient(e.target.value)}} />\n          </Row>\n\n          <Row>\n            <Header>Subject</Header>\n            <Input placeholder=\"The subject of the topic\" value={sub} onChange={(e) => {setSub(e.target.value)}} />\n          </Row>\n\n          <Row>\n            <Header>Message</Header>\n            <ShortInfo placeholder=\"The message to deliver\" maxlength = \"500\" value={msg} onChange={(e) => {setMsg(e.target.value)}}/>\n          </Row>\n\n          <Row>\n            <Header>Call to Action</Header>\n            <Input placeholder=\"Call to action url if any\" maxlength = \"200\" value={cta} onChange={(e) => {setCTA(e.target.value)}} />\n          </Row>\n\n          <Row>\n            <Header>Image url</Header>\n            <Input placeholder=\"Image url if any\" maxlength = \"200\" value={img} onChange={(e) => {setImg(e.target.value)}} />\n          </Row>\n        </FormSubmision>\n\n        <Buttons>\n          <Continue theme='#674c9f' disabled={processing} onClick={handleSendMessage}>\n            {processing &&\n              <Loader\n               type=\"Oval\"\n               color=\"#FFF\"\n               height={16}\n               width={16}\n              />\n            }\n            {!processing &&\n              <Text>Group Message</Text>\n            }\n          </Continue>\n          <Continue theme='#e20880' disabled={processing} onClick={handleSendMessage}>\n            {processing &&\n              <Loader\n               type=\"Oval\"\n               color=\"#FFF\"\n               height={16}\n               width={16}\n              />\n            }\n            {!processing &&\n              <Text>Secret Message</Text>\n            }\n          </Continue>\n        </Buttons>\n\n\n      </Channel>\n    </Container>\n  );\n}\n\n// css styles\nconst Container = styled.div`\n  flex: 1;\n  display: flex;\n  padding: 20px;\n  width: '100%';\n`\n\nconst Channel = styled.div`\n  display: flex;\n  flex-direction: column;\n  flex: 1;\n`\n\nconst Notice = styled.div`\n  margin-top: 10px;\n  display: flex;\n  flex-direction: column;\n`\n\nconst Title = styled.h1`\n  color: #674c9f;\n  font-size: 30px;\n  font-weight: 300;\n  margin-top: 0px;\n  margin-bottom: 30px;\n`\n\nconst Info = styled.label`\n  padding-bottom: 20px;\n  font-size: 14px;\n  color: #000;\n`\n\nconst Buttons = styled(Info)`\n  display: flex;\n    justify-content: space-around;\n`\n\nconst FormSubmision = styled.div`\n  display: flex;\n  flex-direction: column;\n`\n\nconst Input = styled.input`\n  border: 0px;\n  outline: 0px;\n  border-bottom: 1px solid #ddd;\n  margin: 25px 10px;\n  padding: 5px;\n  flex: 1;\n`\n\nconst Name = styled(Input)`\n  border-bottom: 1px solid #e20880;\n  font-size: 24px;\n`\n\nconst ShortInfo = styled.textarea`\n  outline: 0;\n  border: 0;\n  border-bottom: 1px solid #35c5f3;\n  margin: 10px;\n  font-size: 18px;\n  min-height: 80px;\n  color: #111;\n  flex: 1;\n`\n\nconst Url = styled(Input)`\n  border-bottom: 1px solid #674c9f;\n  font-size: 1=8px;\n`\n\nconst DropzoneContainer = styled.div`\n  margin: 20px 20px 10px 20px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n`\n\nconst Row = styled.div`\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n`\n\nconst Text = styled.span`\n\n`\n\nconst Header = styled.span`\n  width: 150px;\n`\n\nconst Continue = styled.button`\n  border: 0;\n  outline: 0;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  color: #fff;\n  border-radius: 20px;\n  font-size: 14px;\n  background: ${props => props.theme || '#674c9f'};\n  border-radius: 8px;\n  padding: 16px;\n  font-size: 16px;\n  font-weight: 400;\n  flex: 1;\n  margin: 10px 20px;\n`\n\n\n// Export Default\nexport default ChannelDashboard;\n","import React from \"react\";\nimport styled, { css } from 'styled-components';\n\nimport 'react-dropzone-uploader/dist/styles.css'\nimport Dropzone from 'react-dropzone-uploader'\n\nimport Loader from 'react-loader-spinner';\nimport { bigNumberify, parseUnits } from 'ethers/utils'\n\nimport { useWeb3React, UnsupportedChainIdError } from '@web3-react/core'\n\nimport { addresses, abis } from \"@project/contracts\";\nconst ethers = require('ethers');\n\nconst ipfs = require('ipfs-api')()\n\n// Create Header\nfunction CreateChannel() {\n  const { active, error, account, library, chainId } = useWeb3React();\n\n  const [processing, setProcessing] = React.useState(false);\n  const [uploadDone, setUploadDone] = React.useState(false);\n  const [file, setFile] = React.useState(undefined);\n\n  const [name, setName] = React.useState('');\n  const [desc, setDesc] = React.useState('');\n  const [url, setURL] = React.useState('');\n\n  React.useEffect(() => {\n\n  });\n\n  // called every time a file's `status` changes\n  const handleChangeStatus = ({ meta, file }, status) => { console.log(status, meta, file) }\n\n  const onDropHandler=(files) =>{\n    //   var file = files[0]\n    //   const reader = new FileReader();\n    //   reader.onload = (event) => {\n    //     console.log(event.target.result);\n    //   };\n    //   reader.readAsDataURL(file);\n    // setFile(file);\n    // console.log(\"Drop Handler\");\n    // console.log(file);\n  }\n\n  // receives array of files that are done uploading when submit button is clicked\n  const handleSubmit = (files, allFiles) => {\n    setUploadDone(true);\n\n    console.log(files.map(f => f.meta))\n    allFiles.forEach(f => {\n      var file = f.file;\n      var reader = new FileReader();\n      reader.readAsDataURL(file);\n      console.log(f.file);\n      reader.onloadend = function (e) {\n        console.log(reader.result);\n        setFile(reader.result);\n      }\n    })\n    console.log(\"andle Submit\");\n  }\n\n  const handleCreateChannel = async () => {\n    // Check everything in order\n    // skip this for now\n    setProcessing(true);\n\n    console.log(file);\n    console.log(name);\n    console.log(desc);\n    console.log(url);\n\n    const input = JSON.stringify(\n      {\n        \"name\": name,\n        \"info\": desc,\n        \"url\": url,\n        \"icon\": file\n      }\n    )\n    const ipfs = require(\"nano-ipfs-store\").at(\"https://ipfs.infura.io:5001\");\n\n    console.log(\"sending payload\");\n    const cid = await ipfs.add(input);\n    console.log(\"IPFS cid:\", cid);\n    //console.log(await ipfs.cat(cid));\n\n    // Send Transaction\n    // First Approve DAI\n    var signer = library.getSigner(account);\n\n    let daiContract = new ethers.Contract(addresses.dai, abis.erc20, signer);\n\n    // Pick between 50 DAI AND 25K DAI\n    let randomNumber = Math.ceil(Math.random() * 24949) + 50;\n    const fees = parseUnits(randomNumber.toString(), 18);\n\n    var sendTransactionPromise = daiContract.approve(addresses.epnscore, fees);\n    const tx = await sendTransactionPromise;\n\n    console.log(tx);\n    console.log(\"waiting for tx to finish\");\n    await library.waitForTransaction(tx.hash);\n\n    let contract = new ethers.Contract(addresses.epnscore, abis.epnscore, signer);\n    var anotherSendTxPromise = contract.createChannelWithFees(cid);\n\n    anotherSendTxPromise.then(function(tx) {\n      console.log(tx);\n      console.log(\"Check: \" + account);\n\n    });\n  }\n\n  return (\n    <Container>\n      <Channel>\n        <Notice>\n          <Title>Create your Channel!</Title>\n\n          {uploadDone && !processing &&\n            <Info>Image Verified! Just fill in your other information and hit <b>Beam me up</b> to create your channel... literal goosebumps!!!</Info>\n          }\n          {!uploadDone &&\n            <>\n            <Info><b>Ethereum Push Notification Service</b> (EPNS) makes it extremely easy to open and maintain a genuine channel of communication with your users.</Info>\n            <Info>The only step for <b>You</b> or your <b>dApp</b> or even your <b>Smart Contract</b> is opening up the channel.</Info>\n            <Info>Rest of the heavy lifting of securely connecting users, wallets, device tokens, listening to and ensuring sent events, forming and delivering payload to each mobile or destop devices and informing them and you about it is done automagically by EPNS.</Info>\n            </>\n          }\n        </Notice>\n\n        {!processing && uploadDone &&\n          <FormSubmision>\n            <Name placeholder=\"Your Channel Name\" maxlength = \"40\" value={name} onChange={(e) => {setName(e.target.value)}}/>\n            <ShortInfo placeholder=\"Your Channel's Short Description\" maxlength = \"200\" value={desc} onChange={(e) => {setDesc(e.target.value)}}/>\n            <Url placeholder=\"Your website\" maxlength = \"200\" value={url} onChange={(e) => {setURL(e.target.value)}}/>\n          </FormSubmision>\n        }\n\n          <>\n          {!uploadDone &&\n            <DropzoneContainer>\n              <Info>Drop in your channel <b>(dApp or Website) official logo</b> here and submit first.</Info>\n              <Dropzone\n                onChangeStatus={handleChangeStatus}\n                onSubmit={handleSubmit}\n                onDrop={onDropHandler}\n                maxFiles={1}\n                multiple={false}\n                accept=\"image/jpeg,image/png\"\n              />\n            </DropzoneContainer>\n          }\n          </>\n\n        {uploadDone &&\n          <Continue theme={processing ? '#674c9f' : '#e20880'} disabled={processing} onClick={handleCreateChannel}>\n            {processing &&\n              <Loader\n               type=\"Oval\"\n               color=\"#FFF\"\n               height={16}\n               width={16}\n              />\n            }\n            {!processing &&\n              <Text>Beam me up!</Text>\n            }\n          </Continue>\n        }\n\n      </Channel>\n    </Container>\n  );\n}\n\n// css styles\nconst Container = styled.div`\n  flex: 1;\n  display: flex;\n  padding: 20px;\n  width: '100%';\n`\n\nconst Channel = styled.div`\n  display: flex;\n  flex-direction: column;\n  flex: 1;\n`\n\nconst Notice = styled.div`\n  margin-top: 10px;\n  display: flex;\n  flex-direction: column;\n`\n\nconst Title = styled.h1`\n  color: #674c9f;\n  font-size: 30px;\n  font-weight: 300;\n  margin-top: 0px;\n  margin-bottom: 30px;\n`\n\nconst Info = styled.label`\n  padding-bottom: 20px;\n  font-size: 14px;\n  color: #000;\n`\n\nconst Info2 = styled(Info)`\n\n`\n\nconst FormSubmision = styled.div`\n  display: flex;\n  flex-direction: column;\n`\n\nconst Input = styled.input`\n  border: 0px;\n  outline: 0px;\n  border-bottom: 1px solid #ddd;\n  margin: 25px 10px;\n  padding: 5px;\n`\n\nconst Name = styled(Input)`\n  border-bottom: 1px solid #e20880;\n  font-size: 24px;\n`\n\nconst ShortInfo = styled.textarea`\n  outline: 0;\n  border: 0;\n  border-bottom: 1px solid #35c5f3;\n  margin: 10px;\n  font-size: 18px;\n  min-height: 80px;\n  color: #111;\n`\n\nconst Url = styled(Input)`\n  border-bottom: 1px solid #674c9f;\n  font-size: 1=8px;\n`\n\nconst DropzoneContainer = styled.div`\n  margin: 20px 20px 10px 20px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n`\n\nconst Text = styled.span`\n\n`\n\nconst Continue = styled.button`\n  border: 0;\n  outline: 0;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  color: #fff;\n  border-radius: 20px;\n  font-size: 14px;\n  background: ${props => props.theme || '#674c9f'};\n  margin: 30px 0px 0px 0px;\n  border-radius: 8px;\n  padding: 16px;\n  font-size: 16px;\n  font-weight: 400;\n`\n\n\n// Export Default\nexport default CreateChannel;\n","import React from \"react\";\nimport styled, { css } from 'styled-components';\n\nimport { useWeb3React } from '@web3-react/core'\nimport { addresses, abis } from \"@project/contracts\";\nimport EPNSCoreHelper from 'helpers/EPNSCoreHelper';\nimport { ethers } from \"ethers\";\nimport { BigNumber, bigNumberify, formatEther } from 'ethers/utils'\n\n// Create Header\nfunction Feedbox({ epnsReadProvider }) {\n  const { account, library } = useWeb3React();\n\n  const [userInterestInfo, setUserInterestInfo] = React.useState(null);\n\n  React.useEffect(() => {\n\n    if (!!account && !!library) {\n      initUserInterest();\n    }\n\n  }, [account, library]);\n\n  // Create Interest Calculation\n  const attachInterestCalculation = () => {\n    library.on('block', (blockNumber) => {\n      calculateUserInterest(blockNumber);\n    });\n  }\n\n  const initUserInterest = () => {\n    library.getBlockNumber().then((blockNumber) => {\n      calculateUserInterest(blockNumber);\n\n      attachInterestCalculation();\n    });\n  }\n\n  const calculateUserInterest = async (blockNumber) => {\n    // get all details\n    const contractInstance = new ethers.Contract(addresses.epnscore, abis.epnscore, library);\n\n    const divisor = 10000000;\n    const ratio = await EPNSCoreHelper.getFairShareOfUserAtBlock(account, blockNumber, contractInstance);\n    const poolFunds = await EPNSCoreHelper.getPoolFunds(contractInstance);\n    const userInfo = await EPNSCoreHelper.getUserInfo(account, contractInstance);\n    const interestClaimed = userInfo.interestClaimed;\n\n    const adaiERC20 = new ethers.Contract(addresses.aDai, abis.erc20, library);\n    const availableFunds = await adaiERC20.balanceOf(addresses.epnscore);\n\n    const totalProfit = availableFunds.sub(poolFunds);\n    const userProfit = (ratio.mul(totalProfit)).div(divisor);\n\n    console.log(ratio.toNumber() / divisor);\n    console.log(formatEther(poolFunds));\n    console.log(formatEther(availableFunds));\n    console.log(formatEther(totalProfit));\n    console.log(formatEther(userProfit));\n    console.log(formatEther(interestClaimed));\n\n    const obj = {\n      block: blockNumber,\n      pool: Number(formatEther(poolFunds)).toFixed(8),\n      available: Number(formatEther(availableFunds)).toFixed(8),\n      profit: Number(formatEther(totalProfit)).toFixed(8),\n      ratio: ((ratio.toNumber() / divisor) * 100).toFixed(8),\n      userProfit: Number(formatEther(userProfit)).toFixed(8),\n      interestClaimed: Number(formatEther(interestClaimed)).toFixed(8)\n    }\n\n    setUserInterestInfo(obj);\n\n  }\n\n  // Render\n  return (\n    <Container>\n      {userInterestInfo &&\n        <InterestInfo>\n          <InterestRow>\n            <Msg theme=\"block\">Block Number: {userInterestInfo.block}</Msg>\n          </InterestRow>\n          <InterestRow>\n            <Title>Interest Pool:</Title>\n            <Msg theme=\"primary\">{userInterestInfo.pool} DAI</Msg>\n          </InterestRow>\n          <InterestRow>\n            <Title>Pool + Interest Generated:</Title>\n            <Msg theme=\"primary\">{userInterestInfo.available} DAI</Msg>\n          </InterestRow>\n          <InterestRow>\n            <Title>Entire Pool Profit:</Title>\n            <Msg theme=\"primary\">{userInterestInfo.profit} DAI</Msg>\n          </InterestRow>\n          <InterestRow>\n            <Title>User Fair Share Percentage:</Title>\n            <Msg theme=\"secondary\">{userInterestInfo.ratio}%</Msg>\n          </InterestRow>\n          <InterestRow>\n            <Title>User Profit:</Title>\n            <Msg theme=\"secondary\">{userInterestInfo.userProfit} DAI</Msg>\n          </InterestRow>\n          <InterestRow>\n            <Title>Interest Claimed:</Title>\n            <Msg theme=\"third\">{userInterestInfo.interestClaimed} DAI</Msg>\n          </InterestRow>\n        </InterestInfo>\n      }\n      {!userInterestInfo &&\n      <>\n        Loading Interest Stats...\n      </>\n      }\n    </Container>\n  );\n}\n\n// css styles\nconst Container = styled.div`\n  padding: 20px;\n  font-size: 16px;\n  display: flex;\n  font-weight: 200;\n  align-content: center;\n  align-items: center;\n  justify-content: center;\n  width: 100%;\n  min-height: 40vh;\n`\n\nconst InterestInfo = styled.div`\n  border: 1px solid #ddd;\n  padding: 15px;\n  border-radius: 10px;\n`\n\nconst InterestRow = styled.div`\n  margin: 5px;\n  padding: 5px;\n  border-bottom: 1px solid #eee;\n  font-weight: 400;\n  font-size: 14px;\n  display: flex;\n  justify-content: space-between;\n`\n\nconst Title = styled.span`\n  font-weight: 600;\n`\n\nconst Msg = styled.span`\n  padding: 2px 10px;\n  margin: 0px 10px;\n  font-size: 12px;\n  border-radius: 10px;\n  color: #000;\n\n  ${props => props.theme === 'block' && css`\n    background: #e20880;\n    color: #FFF;\n    font-size: 14px;\n    margin: 10px 0px;\n    font-weight: 600;\n  `};\n\n  ${props => props.theme === 'primary' && css`\n    background: #e2088011;\n  `};\n\n  ${props => props.theme === 'secondary' && css`\n    background: #35c5f311;\n  `};\n\n  ${props => props.theme === 'third' && css`\n    background: #674c9f11;\n  `};\n`\n\n\n// Export Default\nexport default Feedbox;\n","import React from \"react\";\nimport styled, { css } from 'styled-components';\nimport { AnimateOnChange } from 'react-animation';\n\nimport { useWeb3React, UnsupportedChainIdError } from '@web3-react/core'\n\n// Create Header\nfunction DisplayNotice({ title, theme }) {\n  React.useEffect(() => {\n\n  }, [title, theme]);\n\n  // to create blockies\n\n  return (\n    <Container>\n      <AnimateOnChange\n        animationIn=\"fadeIn\"\n        animationOut=\"fadeOut\"\n        durationOut={200}\n      >\n        <Notice theme={theme}>{title}</Notice>\n      </AnimateOnChange>\n    </Container>\n  );\n}\n\n// css styles\nconst Container = styled.div`\n\n`\n\nconst Notice = styled.span`\n  border: 0;\n  outline: 0;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding: 8px 15px;\n  margin: 10px;\n  color: #fff;\n  border-radius: 20px;\n  font-size: 14px;\n  font-weight: 400;\n\n  ${props => props.theme === 'primary' && css`\n    background: #e20880;\n  `};\n\n  ${props => props.theme === 'secondary' && css`\n    background: #35c5f3;\n  `};\n\n  ${props => props.theme === 'third' && css`\n    background: #674c9f;\n  `};\n`\n\n// Export Default\nexport default DisplayNotice;\n","const size = {\n  mobileS: '320px',\n  mobileM: '375px',\n  mobileL: '425px',\n  tablet: '768px',\n  laptop: '1024px',\n  laptopL: '1440px',\n  desktop: '2560px'\n}\n\nexport const Device = {\n  mobileS: `(max-width: ${size.mobileS})`,\n  mobileM: `(max-width: ${size.mobileM})`,\n  mobileL: `(max-width: ${size.mobileL})`,\n  tablet: `(max-width: ${size.tablet})`,\n  laptop: `(max-width: ${size.laptop})`,\n  laptopL: `(max-width: ${size.laptopL})`,\n  desktop: `(max-width: ${size.desktop})`,\n  desktopL: `(max-width: ${size.desktop})`\n};\n","import EPNSCoreHelper from 'helpers/EPNSCoreHelper';\nimport { ethers } from \"ethers\";\nimport { bigNumber, bigNumberify } from 'ethers/utils'\n\nimport { addresses, abis } from \"@project/contracts\";\n\n// STATIC SINGLETON\nexport const ChannelEvents = {\n    ADD_CHANNEL_ANY: \"AddChannelAny\",\n    ADD_CHANNEL_SELF: \"AddChannelSelf\",\n    UPDATE_CHANNEL_ANY: \"UpdateChannelAny\",\n    UPDATE_CHANNEL_SELF: \"UpdateChannelSelf\",\n    SUBSCRIBER_ANY_CHANNEL: \"SubscriberAnyChannel\",\n    SUBSCRIBER_SELF_CHANNEL: \"SubscriberSelfChannel\",\n    UNSUBSCRIBER_ANY_CHANNEL: \"UnsubscriberAnyChannel\",\n    UNSUBSCRIBER_SELF_CHANNEL: \"UnsubscriberSelfChannel\",\n}\n\nexport default class ChannelsDataStore {\n    static instance = ChannelsDataStore.instance || new ChannelsDataStore();\n\n    state = {\n      channelsCount: -1,\n      channelsMeta: {},\n      channelsJson: {},\n\n      callbacks: [],\n\n      account: null,\n      epnsReadProvider: null,\n    }\n\n    // init\n    init = (account, epnsReadProvider) => {\n      // set account\n      this.state.account = account;\n\n      // First attach listeners then overwrite the old one if any\n      this.resetChannelsListeners();\n      this.state.epnsReadProvider = epnsReadProvider;\n      this.initChannelsListenersAsync();\n\n      // next get store channels count\n      this.getChannelsCountAsync();\n    }\n\n    // RESET LISTENERS\n    resetChannelsListeners = () => {\n      // only proceed if a read provider is attached\n      if (this.state.epnsReadProvider) {\n        this.state.epnsReadProvider.removeAllListeners(\"AddChannel\");\n        this.state.epnsReadProvider.removeAllListeners(\"UpdateChannel\");\n        this.state.epnsReadProvider.removeAllListeners(\"Subscribe\");\n        this.state.epnsReadProvider.removeAllListeners(\"Unsubscribe\");\n      }\n    }\n\n    // init LISTENERS\n    initChannelsListenersAsync = async () => {\n      // Add Listeners\n      await this.listenForAddChannelAnyAsync();\n      await this.listenForAddChannelSelfAsync();\n\n      await this.listenForUpdateChannelAnyAsync();\n      await this.listenForUpdateChannelSelfAsync();\n\n      await this.listenForSubscribeAnyAsync();\n      await this.listenForSubscribeSelfAsync();\n      await this.listenForUnsubscribeAnyAsync();\n      await this.listenForUnsubscribeSelfAsync();\n    }\n\n    // 1. Add Any Channel Listeners\n    listenForAddChannelAnyAsync = async () => {\n      const contract = this.state.epnsReadProvider;\n      let filter = contract.filters.AddChannel(null, null);\n\n      contract.on(filter, async (channel, ipfs) => {\n        // Do own stuff\n        await this.incrementChannelsCountAsync(1);\n\n        // then perform callbacks\n        if (this.state.callbacks[ChannelEvents.ADD_CHANNEL_ANY]) {\n          for (let [callbackID, callback] of Object.entries(this.state.callbacks[ChannelEvents.ADD_CHANNEL_ANY])) {\n            if (callback) { callback(channel, ipfs); }\n          }\n        }\n      });\n    }\n\n    // 2. Add Self Channel Listener\n    listenForAddChannelSelfAsync = async () => {\n      const contract = this.state.epnsReadProvider;\n      let filter = contract.filters.AddChannel(this.state.account, null);\n\n      contract.on(filter, async (channel, ipfs) => {\n        // Do own stuff\n        // Nothing to do, just do callback\n\n        // then perform callbacks\n        if (this.state.callbacks[ChannelEvents.ADD_CHANNEL_SELF]) {\n          for (let [callbackID, callback] of Object.entries(this.state.callbacks[ChannelEvents.ADD_CHANNEL_SELF])) {\n            if (callback) { callback(channel, ipfs); }\n          }\n        }\n      });\n    }\n\n    // 3. Update Any Channel Listener\n    listenForUpdateChannelAnyAsync = async () => {\n      const contract = this.state.epnsReadProvider;\n      let filter = contract.filters.UpdateChannel(null, null);\n\n      contract.on(filter, async (channel, ipfs) => {\n        // then perform callbacks\n        if (this.state.callbacks[ChannelEvents.UPDATE_CHANNEL_ANY]) {\n          for (let [callbackID, callback] of Object.entries(this.state.callbacks[ChannelEvents.UPDATE_CHANNEL_ANY])) {\n            if (callback) { callback(channel, ipfs); }\n          }\n        }\n      });\n    }\n\n    // 4. Update Self Channel Listener\n    listenForUpdateChannelSelfAsync = async () => {\n      const contract = this.state.epnsReadProvider;\n      let filter = contract.filters.UpdateChannel(this.state.account, null);\n\n      contract.on(filter, async (channel, ipfs) => {\n        // then perform callbacks\n        if (this.state.callbacks[ChannelEvents.UPDATE_CHANNEL_SELF]) {\n          for (let [callbackID, callback] of Object.entries(this.state.callbacks[ChannelEvents.UPDATE_CHANNEL_SELF])) {\n            if (callback) { callback(channel, ipfs); }\n          }\n        }\n      });\n    }\n\n    // 5. Subscriber Any\n    listenForSubscribeAnyAsync = async () => {\n      const contract = this.state.epnsReadProvider;\n      let filter = contract.filters.Subscribe(null, null);\n\n      contract.on(filter, async (channel, user) => {\n        // Do own stuff\n        if (this.state.channelsMeta[channel]) {\n          const channelID = this.state.channelsMeta[channel];\n          let count = this.state.channelsMeta[channelID].memberCount.toNumber();\n          count = count + 1;\n          this.state.channelsMeta[channelID].memberCount = bigNumberify(count);\n        }\n\n        // then perform callbacks\n        if (this.state.callbacks[ChannelEvents.SUBSCRIBER_ANY_CHANNEL]) {\n          for (let [callbackID, callback] of Object.entries(this.state.callbacks[ChannelEvents.SUBSCRIBER_ANY_CHANNEL])) {\n            if (callback) { callback(channel, user); }\n          }\n        }\n      });\n    }\n\n    // 6. Subscriber Self\n    listenForSubscribeSelfAsync = async () => {\n      const contract = this.state.epnsReadProvider;\n      let filter = contract.filters.Subscribe(this.state.account, null);\n\n      contract.on(filter, async (channel, user) => {\n        // then perform callbacks\n        if (this.state.callbacks[ChannelEvents.SUBSCRIBER_SELF_CHANNEL]) {\n          for (let [callbackID, callback] of Object.entries(this.state.callbacks[ChannelEvents.SUBSCRIBER_SELF_CHANNEL])) {\n            if (callback) { callback(channel, user); }\n          }\n        }\n      });\n    }\n\n    // 7. Unsubscribe Any\n    listenForUnsubscribeAnyAsync = async () => {\n      const contract = this.state.epnsReadProvider;\n      let filter = contract.filters.Unsubscribe(null, null);\n\n      contract.on(filter, async (channel, user) => {\n        // Do own stuff\n        if (this.state.channelsMeta[channel]) {\n          const channelID = this.state.channelsMeta[channel];\n          let count = this.state.channelsMeta[channelID].memberCount.toNumber();\n          count = count - 1;\n          this.state.channelsMeta[channelID].memberCount = bigNumberify(count);\n        }\n\n        // then perform callbacks\n        if (this.state.callbacks[ChannelEvents.UNSUBSCRIBER_ANY_CHANNEL]) {\n          for (let [callbackID, callback] of Object.entries(this.state.callbacks[ChannelEvents.UNSUBSCRIBER_ANY_CHANNEL])) {\n            if (callback) { callback(channel, user); }\n          }\n        }\n      });\n    }\n\n    // 8. Unsubscribe Self\n    listenForUnsubscribeSelfAsync = async () => {\n      const contract = this.state.epnsReadProvider;\n      let filter = contract.filters.Unsubscribe(this.state.account, null);\n\n      contract.on(filter, async (channel, user) => {\n        // then perform callbacks\n        if (this.state.callbacks[ChannelEvents.UNSUBSCRIBER_SELF_CHANNEL]) {\n          for (let [callbackID, callback] of Object.entries(this.state.callbacks[ChannelEvents.UNSUBSCRIBER_SELF_CHANNEL])) {\n            if (callback) { callback(channel, user); }\n          }\n        }\n      });\n    }\n\n    // FOR CALLBACKS\n    addCallbacks = (callbackType, callbackID, callback) => {\n      // first check if callback already exists\n      if (!this.state.callbacks[callbackType]) {\n        this.state.callbacks[callbackType] = {};\n      }\n\n      if (!this.state.callbacks[callbackType][callbackID]) {\n        this.state.callbacks[callbackType][callbackID] = callback;\n      }\n    }\n\n    removeCallbacks = (callbackType, callbackID) => {\n      // first check if callback already exists\n      if (this.state.callbacks[callbackType][callbackID]) {\n        this.state.callbacks[callbackType][callbackID] = null;\n      }\n    }\n\n    // CHANNELS COUNT\n    getChannelsCountAsync = async () => {\n      return new Promise (async (resolve, reject) => {\n        if (this.state.channelsCount == -1) {\n          // Count not set, get and set it first\n          const count = EPNSCoreHelper.getTotalNumberOfChannels(this.state.epnsReadProvider)\n            .then(response => {\n              this.state.channelsCount = response;\n              console.log(\"getChannelsCountAsync() --> %o\", response);\n              resolve(this.state.channelsCount)\n            })\n            .catch(err => { console.log(\"!!!Error, getChannelsCountAsync() --> %o\", err); reject(err); });\n        }\n        else {\n          resolve(this.state.channelsCount);\n        }\n      });\n    }\n\n    incrementChannelsCountAsync = async (incrementCount) => {\n      return new Promise ((resolve, reject) => {\n        this.getChannelsCountAsync()\n          .then(response => {\n            this.state.channelsCount = response + incrementCount;\n            console.log(\"incrementChannelsCountAsync() --> %d\", this.state.channelsCount);\n            resolve(this.state.channelsCount)\n          })\n          .catch(err => { console.log(\"!!!Error, incrementChannelsCountAsync() --> %o\", err); reject(err); });\n      });\n\n    }\n\n    // CHANNELS META FUNCTIONS\n    // To get channels meta\n    getChannelsMetaAsync = async (atIndex, numChannels) => {\n      return new Promise (async (resolve, reject) => {\n        // get total number of channels\n        const channelsCount = await this.getChannelsCountAsync();\n\n        if (atIndex == -1) {\n          atIndex = channelsCount - 1;\n        }\n\n        if (numChannels == -1) {\n          numChannels = channelsCount;\n        }\n\n        // Get channels\n        let channelsMeta = [];\n        let channelsDummy = [];\n\n        // prefil and then refil\n        let count = 0;\n        for (let i = 0; i < numChannels; i++) {\n          const assignedChannelID = atIndex - i;\n          channelsDummy[count] = assignedChannelID;\n          count = count + 1;\n        }\n\n        const promises = channelsDummy.map(async (channelID) => {\n          // Match the cache\n          await this.getChannelMetaAsync(channelID)\n            .then(response => {\n              const mappings = { ...response };\n              mappings.id = channelID;\n\n              channelsMeta = [mappings, ...channelsMeta];\n            })\n            .catch(err => console.log(\"!!!Error (but skipping), getChannelMetaAsync() --> %o\", err))\n        });\n\n        // wait until all promises are resolved\n        await Promise.all(promises);\n\n        channelsMeta.sort((a, b) => {\n          if (a.id < b.id) return -1;\n          if (a.id > b.id) return 1;\n          return 0;\n        });\n\n        // return channels meta\n        console.log(\"getChannelsMetaAsync(From %d to %d) --> %o\", atIndex - numChannels + 1, atIndex, channelsMeta);\n        resolve(channelsMeta);\n      });\n    }\n\n    // To get a single channel meta via id\n    getChannelMetaAsync = async (channelID) => {\n      return new Promise (async (resolve, reject) => {\n        if (this.state.channelsMeta[channelID]) {\n          console.log(\"getChannelMetaAsync() [CACHED] --> %o\", this.state.channelsMeta[channelID]);\n          resolve(this.state.channelsMeta[channelID]);\n        }\n        else {\n          let channelAddress;\n\n          await EPNSCoreHelper.getChannelAddressFromID(channelID, this.state.epnsReadProvider)\n            .then(async response => {\n              channelAddress = response;\n              await this.getChannelMetaViaAddressAsync(channelAddress)\n                .then(response => {\n                  // update the channel cache before resolving\n                  this.state.channelsMeta[channelID] = response;\n                  this.state.channelsMeta[channelAddress] = channelID;\n\n                  // resolve\n                  console.log(\"getChannelMetaAsync() [Address: %s] --> %o\", channelAddress, response);\n                  resolve(response);\n                })\n            })\n            .catch(err => { console.log(\"!!!Error, getChannelMetaAsync() --> %o\", err); reject(err); })\n        }\n      });\n    }\n\n    // To get a single channel meta via address\n    getChannelMetaViaAddressAsync = async (channelAddress) => {\n      return new Promise (async (resolve, reject) => {\n        if (this.state.channelsMeta[channelAddress]) {\n          const channelID = this.state.channelsMeta[channelAddress];\n\n          console.log(\"getChannelMetaViaAddressAsync() [CACHED] --> %o\", this.state.channelsMeta[channelID]);\n          resolve(this.state.channelsMeta[channelID]);\n        }\n        else {\n          // Can't cache this :(, no way to know channel id\n          await EPNSCoreHelper.getChannelInfo(channelAddress, this.state.epnsReadProvider)\n            .then(response => {\n              // resolve\n              console.log(\"getChannelMetaViaAddressAsync() [Address: %s] --> %o\", channelAddress, response);\n              resolve(response);\n            })\n            .catch(err => { console.log(\"!!!Error, getChannelMetaViaAddressAsync() --> %o\", err); reject(err); })\n        }\n      });\n    }\n\n    // CHANNELS INFO FUNCTIONS\n    // To get a single channel meta via id\n    getChannelJsonAsync = async (channelAddress) => {\n      return new Promise (async (resolve, reject) => {\n        if (this.state.channelsJson[channelAddress]) {\n          console.log(\"getChannelJsonAsync() [CACHED] --> %o\", this.state.channelsJson[channelAddress]);\n          resolve(this.state.channelsJson[channelAddress]);\n        }\n        else {\n          await EPNSCoreHelper.getChannelJsonFromChannelAddress(channelAddress, this.state.epnsReadProvider)\n            .then(response => {\n              // First set the cache\n              this.state.channelsJson[channelAddress] = response;\n\n              // resolve\n              console.log(\"getChannelJsonAsync() [Address: %s] --> %o\", channelAddress, response);\n              resolve(response);\n            })\n            .catch(err => { console.log(\"!!!Error, getChannelJsonAsync() --> %o\", err); reject(err); })\n        }\n      });\n    }\n\n}\n","import EPNSCoreHelper from 'helpers/EPNSCoreHelper';\nimport { ethers } from \"ethers\";\nimport { bigNumber } from 'ethers/utils'\n\nimport { addresses, abis } from \"@project/contracts\";\n\n// STATIC SINGLETON\nexport const UserEvents = {\n    SUBSCRIBED: \"Subscribed\",\n    UNSUBSCRIBED: \"Unsubscribed\",\n    PUBLIC_KEY_BROADCASTED: \"PublicKeyBroadcasted\",\n    CREATED_CHANNEL: \"CreatedChannel\",\n    DEACTIVATE_CHANNEL: \"DeactivateChannel\",\n}\n\nexport default class UsersDataStore {\n    static instance = UsersDataStore.instance || new UsersDataStore();\n\n    state = {\n      usersCount: -1,\n      userMeta: null,\n      ownerMeta: null,\n\n      callbacks: [],\n\n      account: null,\n      epnsReadProvider: null,\n    }\n\n    // init\n    init = (account, epnsReadProvider) => {\n      // set account\n      this.state.account = account;\n\n      // First attach listeners then overwrite the old one if any\n      this.resetUsersListeners();\n      this.state.epnsReadProvider = epnsReadProvider;\n      this.initUsersListenersAsync();\n\n      // next get store user count & user meta\n      this.getOwnerMetaAsync();\n      this.getUsersCountAsync();\n      this.getUserMetaAsync();\n    }\n\n    // RESET LISTENERS\n    resetUsersListeners = () => {\n      // only proceed if a read provider is attached\n      if (this.state.epnsReadProvider) {\n        this.state.epnsReadProvider.removeAllListeners(\"Subscribe\");\n        this.state.epnsReadProvider.removeAllListeners(\"Unsubscribe\");\n        this.state.epnsReadProvider.removeAllListeners(\"PublicKeyRegistered\");\n        this.state.epnsReadProvider.removeAllListeners(\"AddChannel\");\n        this.state.epnsReadProvider.removeAllListeners(\"DeactivateChannel\");\n      }\n\n      // reset user meta as well\n      this.state.userMeta = null;\n    }\n\n    // init LISTENERS\n    initUsersListenersAsync = async () => {\n      // Add Listeners\n      await this.listenForSubscribedAsync();\n      await this.listenForUnsubscribedAsync();\n\n      if (!this.state.userMeta || (this.state.userMeta && !this.state.userMeta.publicKeyRegistered)) {\n        await this.listenForPublicKeyBroadcastAsync();\n      }\n    }\n\n    // 1. Listen for Subscribe Async\n    listenForSubscribedAsync = async () => {\n      const contract = this.state.epnsReadProvider;\n      let filter = contract.filters.Subscribe(null, this.state.account);\n\n      if (this.state.userMeta) {\n        this.state.userMeta.subscribedCount = this.state.userMeta.subscribedCount.add(1);\n      }\n\n      contract.on(filter, async (channel, user) => {\n        // then perform callbacks\n        if (this.state.callbacks[UserEvents.SUBSCRIBED]) {\n          for (let [callbackID, callback] of Object.entries(this.state.callbacks[UserEvents.SUBSCRIBED])) {\n            if (callback) { callback(channel, user); }\n          }\n        }\n      });\n    }\n\n    // 2. Listen for Unsubscribe Async\n    listenForUnsubscribedAsync = async () => {\n      const contract = this.state.epnsReadProvider;\n      let filter = contract.filters.Unsubscribe(null, this.state.account);\n\n      if (this.state.userMeta) {\n        this.state.userMeta.subscribedCount = this.state.userMeta.subscribedCount.sub(1);\n      }\n\n      contract.on(filter, async (channel, user) => {\n        // then perform callbacks\n        if (this.state.callbacks[UserEvents.UNSUBSCRIBED]) {\n          for (let [callbackID, callback] of Object.entries(this.state.callbacks[UserEvents.UNSUBSCRIBED])) {\n            if (callback) { callback(channel, user); }\n          }\n        }\n      });\n    }\n\n    // 3. Listen For Public Key Broadcast\n    listenForPublicKeyBroadcastAsync = async () => {\n      const contract = this.state.epnsReadProvider;\n      let filter = contract.filters.PublicKeyRegistered(this.state.account, null);\n\n      if (this.state.userMeta) {\n        this.state.userMeta.publicKeyRegistered = true;\n      }\n\n      contract.once(filter, async (channel, user) => {\n        // then perform callbacks\n        if (this.state.callbacks[UserEvents.UNSUBSCRIBED]) {\n          for (let [callbackID, callback] of Object.entries(this.state.callbacks[UserEvents.UNSUBSCRIBED])) {\n            if (callback) { callback(channel, user); }\n          }\n        }\n      });\n    }\n\n    // FOR CALLBACKS\n    addCallbacks = (callbackType, callbackID, callback) => {\n      // first check if callback already exists\n      if (!this.state.callbacks[callbackType]) {\n        this.state.callbacks[callbackType] = {};\n      }\n\n      if (!this.state.callbacks[callbackType][callbackID]) {\n        this.state.callbacks[callbackType][callbackID] = callback;\n      }\n    }\n\n    removeCallbacks = (callbackType, callbackID) => {\n      // first check if callback already exists\n      if (this.state.callbacks[callbackType][callbackID]) {\n        this.state.callbacks[callbackType][callbackID] = null;\n      }\n    }\n\n    // GET OWNER META\n    getOwnerMetaAsync = async () => {\n      return new Promise ((resolve, reject) => {\n        if (this.state.ownerMeta) {\n          console.log(\"getOwnerMetaAsync() [CACHED] --> %o\", this.state.ownerMeta);\n          resolve(this.state.ownerMeta);\n        }\n        else {\n          EPNSCoreHelper.getOwnerInfo(this.state.epnsReadProvider)\n            .then(response => {\n              this.state.ownerMeta = response;\n              console.log(\"getOwnerMetaAsync() --> %o\", response);\n              resolve(this.state.ownerMeta);\n            })\n            .catch(err => { console.log(\"!!!Error, getOwnerMetaAsync() --> %o\", err); reject(err); });\n        }\n      });\n    }\n\n    // USERS COUNT\n    getUsersCountAsync = async () => {\n      return new Promise (async (resolve, reject) => {\n        if (this.state.channelsCount == -1) {\n          // Count not set, get and set it first\n          const count = EPNSCoreHelper.getTotalNumberOfUsers(this.state.epnsReadProvider)\n            .then(response => {\n              this.state.usersCount = response;\n              console.log(\"getUsersCountAsync() --> %o\", response);\n              resolve(this.state.usersCount)\n            })\n            .catch(err => { console.log(\"!!!Error, getUsersCountAsync() --> %o\", err); reject(err); });\n        }\n        else {\n          resolve(this.state.usersCount);\n        }\n      });\n    }\n\n    incrementUsersCountAsync = async (incrementCount) => {\n      return new Promise ((resolve, reject) => {\n        this.getUsersCountAsync()\n          .then(response => {\n            this.state.usersCount = response + incrementCount;\n            console.log(\"incrementChannelsCountAsync() --> %d\", this.state.usersCount);\n            resolve(this.state.usersCount);\n          })\n          .catch(err => { console.log(\"!!!Error, getUsersCountAsync() --> %o\", err); reject(err); });\n      });\n    }\n\n    // GET USER META\n    getUserMetaAsync = async () => {\n      return new Promise ((resolve, reject) => {\n        if (this.state.userMeta) {\n          console.log(\"getUserMetaAsync() [CACHED] --> %o\", this.state.userMeta);\n          resolve(this.state.userMeta);\n        }\n        else {\n          EPNSCoreHelper.getUserInfo(this.state.account, this.state.epnsReadProvider)\n            .then(response => {\n              this.state.userMeta = response;\n              console.log(\"getUserMetaAsync() --> %o\", this.state.userMeta);\n              resolve(this.state.userMeta);\n            })\n            .catch(err => { console.log(\"!!!Error, getUserMetaAsync() --> %o\", err); reject(err); });\n        }\n      });\n    }\n\n}\n","import React from \"react\";\nimport styled, { css } from 'styled-components';\nimport { Device } from 'assets/Device';\n\nimport { ToastContainer, toast } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.min.css';\nimport Loader from 'react-loader-spinner';\n\nimport Skeleton from '@yisheng90/react-loading';\nimport { IoMdPeople } from 'react-icons/io';\nimport { GiTwoCoins } from 'react-icons/gi';\n\nimport { useWeb3React } from '@web3-react/core';\nimport { ethers } from \"ethers\";\nimport { keccak256, arrayify, hashMessage, recoverPublicKey } from 'ethers/utils';\n\nimport EPNSCoreHelper from 'helpers/EPNSCoreHelper';\nimport ChannelsDataStore, { ChannelEvents } from \"singletons/ChannelsDataStore\";\nimport UsersDataStore, { UserEvents } from \"singletons/UsersDataStore\";\n\n// Create Header\nfunction ViewChannelItem({ channelObject, isOwner, epnsReadProvider, epnsWriteProvide }) {\n  const { account, library } = useWeb3React();\n\n  const [ channelJson, setChannelJson ] = React.useState({});\n  const [ subscribed, setSubscribed ] = React.useState(false);\n  const [ loading, setLoading ] = React.useState(true);\n\n  const [ txInProgress, setTxInProgress ] = React.useState(false);\n\n\n  React.useEffect(() => {\n    fetchChannelJson();\n    registerCallbacks();\n  }, [account, channelObject]);\n\n  // to fetch channels\n  const fetchChannelJson = async () => {\n    const channelJson = await ChannelsDataStore.instance.getChannelJsonAsync(channelObject.addr);\n    const subs = await EPNSCoreHelper.getSubscribedStatus(account, channelObject.addr, epnsReadProvider);\n    setSubscribed(subs);\n\n    setChannelJson(channelJson);\n    setLoading(false);\n  }\n\n  // to register callbacks\n  const registerCallbacks = () => {\n    UsersDataStore.instance.addCallbacks(\n      UserEvents.SUBSCRIBED,\n      \"FromViewChannelItem\",\n      () => {\n        setSubscribed(true);\n        channelObject.memberCount = channelObject.memberCount.add(1);\n      }\n    );\n\n    UsersDataStore.instance.addCallbacks(\n      UserEvents.UNSUBSCRIBED,\n      \"FromViewChannelItem\",\n      () => {\n        setSubscribed(false);\n        channelObject.memberCount = channelObject.memberCount.sub(1);\n      }\n    );\n\n    ChannelsDataStore.instance.addCallbacks(\n      ChannelEvents.SUBSCRIBER_ANY_CHANNEL,\n      \"FromViewChannelItem\",\n      (channel, user) => {\n        if (channel === channelObject.addr) {\n          channelObject.memberCount = channelObject.memberCount.add(1);\n        }\n      }\n    );\n\n    ChannelsDataStore.instance.addCallbacks(\n      ChannelEvents.UNSUBSCRIBER_ANY_CHANNEL,\n      \"FromViewChannelItem\",\n      (channel, user) => {\n        if (channel === channelObject.addr) {\n          channelObject.memberCount = channelObject.memberCount.sub(1);\n        }\n      }\n    );\n  }\n\n  // to subscribe\n  const subscribe = async () => {\n    // Check if public key is broadcasted or not\n    const userMeta = await UsersDataStore.instance.getUserMetaAsync();\n    if (!userMeta.publicKeyRegistered) {\n      const msg = \"Sign to enable Secrets! (Encrypted Messages)\\n Read more: https://epns.io/secret-messages\";\n\n      // Sign a message and extract public key\n      library\n        .getSigner(account)\n        .signMessage(msg)\n        .then(async signature => {\n          const publicKey = recoverPublicKey(arrayify(hashMessage(msg)), signature);\n          const formattedPubKey = publicKey.slice(0, 2) + publicKey.slice(4);\n\n          subscribeAction(formattedPubKey);\n        })\n        .catch(error => {\n          // Show toast as well\n          toast.dark('Skipped for now... Encrypted messages will require this!', {\n            position: \"bottom-right\",\n            autoClose: 5000,\n            hideProgressBar: false,\n            closeOnClick: true,\n            pauseOnHover: true,\n            draggable: true,\n            progress: undefined,\n          });\n\n          subscribeAction(false);\n        })\n    }\n    else {\n      subscribeAction(false);\n    }\n  }\n\n  const subscribeAction = async (withPublicKey) => {\n    setTxInProgress(true);\n\n    let sendWithTxPromise;\n\n    if (withPublicKey) {\n      sendWithTxPromise = epnsWriteProvide.subscribeWithPublicKey(channelObject.addr, withPublicKey);\n    }\n    else {\n      sendWithTxPromise = epnsWriteProvide.subscribe(channelObject.addr);\n    }\n\n    sendWithTxPromise\n      .then(async tx => {\n\n        let txToast = toast.dark(<LoaderToast msg=\"Waiting for Confirmation...\" color=\"#35c5f3\"/>, {\n          position: \"bottom-right\",\n          autoClose: false,\n          hideProgressBar: true,\n          closeOnClick: true,\n          pauseOnHover: true,\n          draggable: true,\n          progress: undefined,\n        });\n\n        try {\n          await library.waitForTransaction(tx.hash);\n\n          toast.update(txToast, {\n            render: \"Transaction Completed!\",\n            type: toast.TYPE.SUCCESS,\n            autoClose: 5000\n          });\n\n          setTxInProgress(false);\n        }\n        catch(e) {\n          toast.update(txToast, {\n            render: \"Transaction Failed! (\" + e.name + \")\",\n            type: toast.TYPE.ERROR,\n            autoClose: 5000\n          });\n\n          setTxInProgress(false);\n        }\n      })\n      .catch(err => {\n        toast.dark('Transaction Cancelled!', {\n          position: \"bottom-right\",\n          type: toast.TYPE.ERROR,\n          autoClose: 5000,\n          hideProgressBar: false,\n          closeOnClick: true,\n          pauseOnHover: true,\n          draggable: true,\n          progress: undefined,\n        });\n\n        setTxInProgress(false);\n      })\n  }\n\n  const unsubscribeAction = async () => {\n    setTxInProgress(true);\n\n    let sendWithTxPromise = epnsWriteProvide.unsubscribe(channelObject.addr);\n\n    sendWithTxPromise\n      .then(async tx => {\n\n        let txToast = toast.dark(<LoaderToast msg=\"Waiting for Confirmation...\" color=\"#35c5f3\"/>, {\n          position: \"bottom-right\",\n          autoClose: false,\n          hideProgressBar: true,\n          closeOnClick: true,\n          pauseOnHover: true,\n          draggable: true,\n          progress: undefined,\n        });\n\n        try {\n          await library.waitForTransaction(tx.hash);\n\n          toast.update(txToast, {\n            render: \"Transaction Completed!\",\n            type: toast.TYPE.SUCCESS,\n            autoClose: 5000\n          });\n\n          setTxInProgress(false);\n        }\n        catch(e) {\n          toast.update(txToast, {\n            render: \"Transaction Failed! (\" + e.name + \")\",\n            type: toast.TYPE.ERROR,\n            autoClose: 5000\n          });\n\n          setTxInProgress(false);\n        }\n      })\n      .catch(err => {\n        toast.dark('Transaction Cancelled!', {\n          position: \"bottom-right\",\n          type: toast.TYPE.ERROR,\n          autoClose: 5000,\n          hideProgressBar: false,\n          closeOnClick: true,\n          pauseOnHover: true,\n          draggable: true,\n          progress: undefined,\n        });\n\n        setTxInProgress(false);\n      })\n  }\n\n  // toast customize\n  const LoaderToast = ({ msg, color }) => (\n    <Toaster>\n      <Loader\n       type=\"Oval\"\n       color={color}\n       height={30}\n       width={30}\n      />\n      <ToasterMsg>{msg}</ToasterMsg>\n    </Toaster>\n  )\n\n  // render\n  return (\n    <Container key={channelObject.addr}>\n      <ChannelLogo>\n        <ChannelLogoOuter>\n          <ChannelLogoInner>\n          {loading &&\n            <Skeleton color=\"#eee\" width=\"100%\" height=\"100%\" />\n          }\n          {!loading &&\n            <ChannelLogoImg src={`${channelJson.icon}`} />\n          }\n          </ChannelLogoInner>\n        </ChannelLogoOuter>\n      </ChannelLogo>\n\n      <ChannelInfo>\n        <ChannelTitle>\n          {loading &&\n            <Skeleton color=\"#eee\" width=\"50%\" height={24} />\n          }\n          {!loading &&\n            <ChannelTitleLink href={channelJson.url} target=\"_blank\" rel=\"nofollow\">{channelJson.name}</ChannelTitleLink>\n          }\n        </ChannelTitle>\n\n        <ChannelDesc>\n          {loading &&\n            <>\n              <SkeletonWrapper atH={5} atW={100}>\n                <Skeleton color=\"#eee\" width=\"100%\" height={5} />\n              </SkeletonWrapper>\n\n              <SkeletonWrapper atH={5} atW={100}>\n                <Skeleton color=\"#eee\" width=\"100%\" height={5} />\n              </SkeletonWrapper>\n\n              <SkeletonWrapper atH={5} atW={100}>\n                <Skeleton color=\"#eee\" width=\"40%\" height={5} />\n              </SkeletonWrapper>\n            </>\n          }\n          {!loading &&\n            <ChannelDescLabel>{channelJson.info}</ChannelDescLabel>\n          }\n        </ChannelDesc>\n\n        <ChannelMeta>\n          {loading &&\n            <>\n              <SkeletonWrapper atH={10} atW={30} marginBottom=\"0\">\n                <Skeleton />\n              </SkeletonWrapper>\n            </>\n          }\n          {!loading &&\n            <>\n              <Subscribers>\n                <IoMdPeople size={20} color=\"#ccc\"/>\n                <SubscribersCount>\n                  {EPNSCoreHelper.formatBigNumberToMetric(channelObject.memberCount)}\n                </SubscribersCount>\n              </Subscribers>\n              <Pool>\n                <GiTwoCoins size={20} color=\"#ccc\"/>\n                <PoolShare>\n                  {EPNSCoreHelper.formatBigNumberToMetric(channelObject.poolContribution, true) + \" DAI\"}\n                </PoolShare>\n              </Pool>\n            </>\n          }\n        </ChannelMeta>\n      </ChannelInfo>\n      {!!account && !!library &&\n        <>\n          <LineBreak />\n          <ChannelActions>\n            {loading &&\n              <SkeletonButton>\n                <Skeleton />\n              </SkeletonButton>\n            }\n            {!loading && !subscribed &&\n              <SubscribeButton onClick={subscribe} disabled={txInProgress}>\n                {txInProgress &&\n                  <ActionLoader>\n                    <Loader\n                     type=\"Oval\"\n                     color=\"#FFF\"\n                     height={16}\n                     width={16}\n                    />\n                  </ActionLoader>\n                }\n                <ActionTitle hideit={txInProgress}>Subscribe</ActionTitle>\n              </SubscribeButton>\n            }\n            {!loading && subscribed &&\n              <>\n              {isOwner &&\n                <OwnerButton disabled>Owner</OwnerButton>\n              }\n              {!isOwner &&\n                <UnsubscribeButton onClick={unsubscribeAction} disabled={txInProgress}>\n                  {txInProgress &&\n                    <ActionLoader>\n                      <Loader\n                       type=\"Oval\"\n                       color=\"#FFF\"\n                       height={16}\n                       width={16}\n                      />\n                    </ActionLoader>\n                  }\n                  <ActionTitle hideit={txInProgress}>Unsubscribe</ActionTitle>\n                </UnsubscribeButton>\n              }\n              </>\n            }\n          </ChannelActions>\n        </>\n      }\n    </Container>\n  );\n}\n\n// css styles\nconst Container = styled.div`\n  flex: 1;\n  display: flex;\n  flex-wrap: wrap;\n\n  background: #fff;\n  border-radius: 10px;\n  border: 1px solid rgb(237, 237, 237);\n\n  margin: 15px 0px;\n  justify-content: center;\n  padding: 10px;\n`\n\nconst SkeletonWrapper = styled.div`\n  overflow: hidden;\n  width: ${props => props.atW + '%' || '100%'};\n  height: ${props => props.atH}px;\n  border-radius: ${props => props.borderRadius || 10}px;\n  margin-bottom: ${props => props.marginBottom || 5}px;\n  margin-right: ${props => props.marginRight || 0}px;\n`\n\nconst ChannelLogo = styled.div`\n  max-width: 100px;\n  min-width: 32px;\n  flex: 1;\n  margin: 5px;\n  padding: 10px;\n  border: 2px solid #fafafa;\n  overflow: hidden;\n  border-radius: 20px;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-self: flex-start;\n`\n\nconst ChannelLogoOuter = styled.div`\n  padding-top: 100%;\n  position: relative;\n`\n\nconst ChannelLogoInner = styled.div`\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  overflow: hidden;\n  border-radius: 20px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n`\n\nconst ChannelLogoImg = styled.img`\n  object-fit: contain;\n  width: 100%;\n  border-radius: 20px;\n  overflow: hidden;\n`\n\nconst ChannelInfo = styled.div`\n  flex: 1;\n  margin: 5px 10px;\n  min-width: 120px;\n  flex-grow: 4;\n  flex-direction: column;\n  display: flex;\n`\n\nconst ChannelTitle = styled.div`\n  margin-bottom: 5px;\n`\n\nconst ChannelTitleLink = styled.a`\n  text-decoration: none;\n  font-weight: 600;\n  color: #e20880;\n  font-size: 20px;\n  &:hover {\n    text-decoration: underline;\n    cursor: pointer;\n    pointer: hand;\n  }\n`\n\nconst ChannelDesc = styled.div`\n  flex: 1;\n  display: flex;\n  font-size: 14px;\n  color: rgba(0, 0, 0, 0.75);\n  font-weight: 400;\n  flex-direction: column;\n`\n\nconst ChannelDescLabel = styled.label`\n  flex: 1;\n`\n\nconst ChannelMeta = styled.div`\n  display: flex;\n  flex-direction: row;\n  font-size: 13px;\n`\n\nconst ChannelMetaBox = styled.label`\n  margin: 0px 5px;\n  color: #fff;\n  font-weight: 600;\n  padding: 2px 8px;\n  border-radius: 10px;\n  font-size: 11px;\n`\n\nconst Subscribers = styled.div`\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n`\n\nconst SubscribersCount = styled(ChannelMetaBox)`\n  background: #35c4f3;\n`\n\nconst Pool = styled.div`\n  margin: 0px 10px;\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n`\n\nconst PoolShare = styled(ChannelMetaBox)`\n  background: #674c9f;\n`\n\nconst LineBreak = styled.div`\n  display: none;\n  flex-basis: 100%;\n  height: 0;\n\n  @media ${Device.tablet} {\n    display: block;\n  }\n`\n\nconst ChannelActions = styled.div`\n  margin: 5px;\n  flex-grow: 1;\n  max-width: 120px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n`\n\nconst ChannelActionButton = styled.button`\n  border: 0;\n  outline: 0;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding: 8px 15px;\n  margin: 10px;\n  color: #fff;\n  border-radius: 5px;\n  font-size: 14px;\n  font-weight: 400;\n  position: relative;\n  &:hover {\n    opacity: 0.9;\n    cursor: pointer;\n    pointer: hand;\n  }\n  &:active {\n    opacity: 0.75;\n    cursor: pointer;\n    pointer: hand;\n  }\n  ${ props => props.disabled && css`\n    &:hover {\n      opacity: 1;\n      cursor: default;\n      pointer: default;\n    }\n    &:active {\n      opacity: 1;\n      cursor: default;\n      pointer: default;\n    }\n  `}\n`\n\nconst ActionTitle = styled.span`\n  ${ props => props.hideit && css`\n    visibility: hidden;\n  `};\n`\n\nconst ActionLoader = styled.div`\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n`\n\nconst SkeletonButton = styled.div`\n  border: 0;\n  outline: 0;\n  height: 30px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  margin: 10px;\n  border-radius: 5px;\n  flex: 1;\n`\n\nconst SubscribeButton = styled(ChannelActionButton)`\n  background: #e20880;\n`\n\nconst UnsubscribeButton = styled(ChannelActionButton)`\n  background: #674c9f;\n`\n\nconst OwnerButton = styled(ChannelActionButton)`\n  background: #35c5f3;\n`\n\nconst Toaster = styled.div`\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  margin: 0px 10px;\n`\n\nconst ToasterMsg = styled.div`\n  margin: 0px 10px;\n`\n\n// Export Default\nexport default ViewChannelItem;\n","import React from \"react\";\nimport styled, { css } from 'styled-components';\nimport Loader from 'react-loader-spinner'\n\nimport { useWeb3React } from '@web3-react/core'\nimport { addresses, abis } from \"@project/contracts\";\nimport EPNSCoreHelper from 'helpers/EPNSCoreHelper';\nimport { ethers } from \"ethers\";\n\nimport DisplayNotice from \"components/DisplayNotice\";\nimport ViewChannelItem from \"components/ViewChannelItem\";\n\nimport ChannelsDataStore, { ChannelEvents } from \"singletons/ChannelsDataStore\";\nimport UsersDataStore, { UserEvents } from \"singletons/UsersDataStore\";\n\n// Create Header\nfunction ViewChannels({ epnsReadProvider, epnsWriteProvide }) {\n  const { account, library } = useWeb3React();\n\n  const [loading, setLoading] = React.useState(true);\n  const [channels, setChannels] = React.useState([]);\n  const [user, setUser] = React.useState(null);\n  const [owner, setOwner] = React.useState(null);\n\n  React.useEffect(() => {\n    fetchChannels();\n  }, [account]);\n\n  // to fetch channels\n  const fetchChannels = async () => {\n    // get and set user and owner first\n    const userMeta = await UsersDataStore.instance.getUserMetaAsync();\n    setUser(userMeta);\n\n    const ownerAddr = await UsersDataStore.instance.getOwnerMetaAsync();\n    setOwner(ownerAddr);\n\n    // const channelsMeta = await EPNSCoreHelper.getChannelsMetaLatestToOldest(-1, -1, epnsReadProvider);\n    const channelsMeta = await ChannelsDataStore.instance.getChannelsMetaAsync(-1, -1);\n\n    // sort this again, this time with subscriber count\n    // channelsMeta.sort((a, b) => {\n    //   if (a.memberCount.toNumber() < b.memberCount.toNumber()) return -1;\n    //   if (a.memberCount.toNumber() > b.memberCount.toNumber()) return 1;\n    //   return 0;\n    // });\n\n    // Filter out channel\n\n    setChannels(channelsMeta);\n    setLoading(false);\n  }\n\n  return (\n    <Container>\n      {loading &&\n        <ContainerInfo>\n          <Loader\n           type=\"Oval\"\n           color=\"#35c5f3\"\n           height={40}\n           width={40}\n          />\n        </ContainerInfo>\n      }\n\n      {!loading && channels.length == 0 &&\n        <ContainerInfo>\n          <DisplayNotice\n            title=\"That's weird, No Channels in EPNS... world is ending... right?\"\n            theme=\"primary\"\n          />\n        </ContainerInfo>\n      }\n\n      {!loading && channels.length != 0 &&\n        <Items id=\"scrollstyle-secondary\">\n\n          {Object.keys(channels).map(index => {\n            const isOwner = (\n              channels[index].addr === account ||\n              (account === owner && channels[index].addr === \"0x0000000000000000000000000000000000000000\")\n            );\n\n            if (channels[index].addr !== \"0x0000000000000000000000000000000000000000\") {\n              return (\n                <ViewChannelItem\n                  key={channels[index].addr}\n                  channelObject={channels[index]}\n                  isOwner={isOwner}\n                  epnsReadProvider={epnsReadProvider}\n                  epnsWriteProvide={epnsWriteProvide}\n                />\n              );\n            }\n            else if (channels[index].addr === \"0x0000000000000000000000000000000000000000\" && user.channellized) {\n              return (\n                <ViewChannelItem\n                  key={channels[index].addr}\n                  channelObject={channels[index]}\n                  isOwner={isOwner}\n                  epnsReadProvider={epnsReadProvider}\n                  epnsWriteProvide={epnsWriteProvide}\n                />\n              );\n            }\n            else {\n              return null;\n            }\n          })}\n        </Items>\n      }\n    </Container>\n  );\n}\n\n// css styles\nconst Container = styled.div`\n  display: flex;\n  flex: 1;\n  flex-direction: column;\n\n  font-weight: 200;\n  align-content: center;\n  align-items: center;\n  justify-content: center;\n\n  max-height: 80vh;\n`\n\nconst ContainerInfo = styled.div`\n  padding: 20px;\n`\n\nconst Items = styled.div`\n  display: block;\n  align-self: stretch;\n  padding: 10px 20px;\n  overflow-y: scroll;\n  background: #fafafa;\n`\n\n// Export Default\nexport default ViewChannels;\n","import React from \"react\";\nimport ReactGA from 'react-ga';\n\nimport styled, { css } from 'styled-components';\n\nimport { addresses, abis } from \"@project/contracts\";\nimport { useWeb3React } from '@web3-react/core'\nimport { ethers } from \"ethers\";\n\nimport Loader from 'react-loader-spinner'\n\nimport EPNSCoreHelper from 'helpers/EPNSCoreHelper';\n\nimport ChannelDashboard from 'segments/ChannelDashboard';\nimport CreateChannel from 'segments/CreateChannel';\nimport Feedbox from 'segments/Feedbox';\nimport ViewChannels from 'segments/ViewChannels';\n\nimport ChannelsDataStore, { ChannelEvents } from \"singletons/ChannelsDataStore\";\nimport UsersDataStore, { UserEvents } from \"singletons/UsersDataStore\";\n\n// Create Header\nfunction Home({ setBadgeCount, bellPressed }) {\n  ReactGA.pageview('/home');\n\n  const { active, error, account, library, chainId } = useWeb3React();\n\n  const [epnsReadProvider, setEpnsReadProvider] = React.useState(null);\n  const [epnsWriteProvider, setEpnsWriteProvider] = React.useState(null);\n\n  const [controlAt, setControlAt] = React.useState(0);\n  const [adminStatusLoaded, setAdminStatusLoaded] = React.useState(false);\n  const [channelAdmin, setChannelAdmin] = React.useState(false);\n  const [channelJson, setChannelJson] = React.useState([]);\n\n  React.useEffect(() => {\n    const contractInstance = new ethers.Contract(addresses.epnscore, abis.epnscore, library);\n    setEpnsReadProvider(contractInstance);\n\n    if (!!(library && account)) {\n      let signer = library.getSigner(account);\n      const signerInstance = new ethers.Contract(addresses.epnscore, abis.epnscore, signer);\n      setEpnsWriteProvider(signerInstance);\n    }\n\n  }, [account]);\n\n  React.useEffect(() => {\n    // Reset when account refreshes\n    setChannelAdmin(false);\n    setAdminStatusLoaded(false);\n    userClickedAt(0);\n    setChannelJson([]);\n\n    // EPNS Read Provider Set\n    if (epnsReadProvider != null) {\n      // Instantiate Data Stores\n      UsersDataStore.instance.init(account, epnsReadProvider);\n      ChannelsDataStore.instance.init(account, epnsReadProvider);\n\n      checkUserForChannelRights();\n    }\n\n  }, [epnsReadProvider]);\n\n  // Revert to Feedbox on bell pressed\n  React.useEffect(() => {\n    setControlAt(0);\n  }, [bellPressed]);\n\n  // handle user action at control center\n  const userClickedAt = (controlIndex) => {\n    setControlAt(controlIndex);\n  }\n\n  //Start Listening...\n  const listenerForChannelRights = async () => {\n    ChannelsDataStore.instance.addCallbacks(\n      ChannelEvents.ADD_CHANNEL_SELF,\n      \"FromCreateChannel\",\n      () => {\n        checkUserForChannelRights();\n      }\n    );\n  }\n\n  // Check if a user is a channel or not\n  const checkUserForChannelRights = async () => {\n    // Check if account is admin or not and handle accordingly\n    EPNSCoreHelper.getChannelJsonFromUserAddress(account, epnsReadProvider)\n      .then(response => {\n        console.log(response);\n        setChannelJson(response);\n        setChannelAdmin(true);\n        setAdminStatusLoaded(true);\n      })\n      .catch(e => {\n        setChannelAdmin(false);\n        setAdminStatusLoaded(true);\n      });\n\n    // Start listening\n    listenerForChannelRights();\n  }\n\n  // Render\n  return (\n    <Container>\n      <Controls>\n        <ControlButton index={0} active={controlAt == 0 ? 1 : 0} border=\"#e20880\"\n          onClick={() => {\n            userClickedAt(0)\n          }}\n        >\n          <ControlImage src=\"./svg/feedbox.svg\" active={controlAt == 0 ? 1 : 0} />\n          <ControlText active={controlAt == 0 ? 1 : 0}>Feedbox</ControlText>\n        </ControlButton>\n        <ControlButton index={1} active={controlAt == 1 ? 1 : 0} border=\"#35c5f3\"\n          onClick={() => {\n            userClickedAt(1)\n          }}\n        >\n          <ControlImage src=\"./svg/channel.svg\" active={controlAt == 1 ? 1 : 0}/>\n          <ControlText active={controlAt == 1 ? 1 : 0}>Channels</ControlText>\n        </ControlButton>\n\n        <ControlButton index={2} active={controlAt == 2 ? 1 : 0} border=\"#674c9f\"\n          disabled={!adminStatusLoaded}\n          onClick={() => {\n            if (adminStatusLoaded) {\n              userClickedAt(2)\n            }\n          }}\n        >\n          {!adminStatusLoaded &&\n            <Loader\n               type=\"Oval\"\n               color=\"#674c9f\"\n               height={32}\n               width={32}\n            />\n          }\n          {channelAdmin && adminStatusLoaded &&\n            <ControlChannelContainer>\n              <ControlChannelImage src={`${channelJson.icon}`} active={controlAt == 2 ? 1 : 0}/>\n              <ControlChannelText active={controlAt == 2 ? 1 : 0}>{channelJson.name}</ControlChannelText>\n            </ControlChannelContainer>\n          }\n          {!channelAdmin && adminStatusLoaded &&\n            <>\n              <ControlImage src=\"./svg/channeladmin.svg\" active={controlAt == 2 ? 1 : 0}/>\n              <ControlText active={controlAt == 2 ? 1 : 0}>Create Your Channel</ControlText>\n            </>\n          }\n        </ControlButton>\n      </Controls>\n      <Interface>\n        {controlAt == 0 &&\n          <Feedbox\n            epnsReadProvider={epnsReadProvider}\n           />\n        }\n        {controlAt == 1 &&\n          <ViewChannels\n            epnsReadProvider={epnsReadProvider}\n            epnsWriteProvide={epnsWriteProvider}\n          />\n        }\n        {controlAt == 2 && !channelAdmin && adminStatusLoaded &&\n          <CreateChannel />\n        }\n        {controlAt == 2 && channelAdmin && adminStatusLoaded &&\n          <ChannelDashboard />\n        }\n      </Interface>\n    </Container>\n  );\n}\n\n// css style\nconst Container = styled.div`\n  flex: 1;\n  display: block;\n  flex-direction: column;\n  min-height: calc(100vh - 100px);\n`\n\nconst Controls = styled.div`\n  flex: 0;\n  display: flex;\n  flex-direction: row;\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: space-between;\n`\n\nconst ControlButton = styled.div`\n  flex: 1 1 25%;\n  height: 120px;\n  min-width: 240px;\n  background: #fff;\n\n  box-shadow: 0px 15px 20px -5px rgba(0, 0, 0, 0.1);\n  border-radius: 15px;\n  border: 1px solid rgb(225,225,225);\n\n  border-bottom: 10px solid rgb(180,180,180);\n  margin: 20px;\n  overflow: hidden;\n\n  display: flex;\n  align-items: center;\n  justify-content: center;\n\n  border-bottom: 10px solid ${(props) => props.active ? props.border : \"rgb(180,180,180)\"};\n\n  &:hover {\n    opacity: 0.9;\n    cursor: pointer;\n    pointer: hand;\n  }\n  &:active {\n    opacity: 0.75;\n    cursor: pointer;\n    pointer: hand;\n  }\n`\n\nconst ControlImage = styled.img`\n  height: 30%;\n  margin-right: 15px;\n  filter: ${(props) => props.active ? \"brightness(1)\" : \"brightness(0)\"};\n  opacity: ${(props) => props.active ? \"1\" : \"0.25\"};\n\n  transition: transform .2s ease-out;\n  ${ props => props.active && css`\n    transform: scale(3.5) translate(-20px, 0px);\n    opacity: 0.4;\n  `};\n`\n\nconst ControlText = styled.label`\n  font-size: 16px;\n  font-weight: 200;\n  opacity: ${(props) => props.active ? \"1\" : \"0.75\"};\n\n  transition: transform .2s ease-out;\n  ${ props => props.active && css`\n    transform: scale(1.5) translate(-10px, 0px);\n  `};\n`\n\nconst ControlChannelContainer = styled.div`\n  margin: 0px 20px;\n  flex-direction: column;\n  align-items: center;\n  display: flex;\n`\n\nconst ControlChannelImage = styled.img`\n    width: 20%;\n    margin-bottom: 10px;\n    transition: transform .2s ease-out;\n    ${ props => props.active && css`\n      transform: scale(3.5) translate(-40px, 5px);\n      opacity: 0.2;\n      z-index: 1;\n    `};\n`\n\nconst ControlChannelText = styled.label`\n  font-size: 16px;\n  font-weight: 300;\n  opacity: ${(props) => props.active ? \"1\" : \"0.75\"};\n  transition: transform .2s ease-out;\n  background: -webkit-linear-gradient(#db268a, #34c6f3);\n  -webkit-background-clip: text;\n  -webkit-text-fill-color: transparent;\n  z-index: 2;\n  ${ props => props.active && css`\n    transform: scale(1.1) translate(0px, -20px);\n  `};\n\n`\n\nconst Interface = styled.div`\n  flex: 1;\n  display: flex;\n\n  box-shadow: 0px 15px 20px -5px rgba(0, 0, 0, 0.1);\n  border-radius: 20px;\n  border: 1px solid rgb(225,225,225);\n\n  margin: 15px;\n  overflow: hidden;\n`\n\n// Export Default\nexport default Home;\n","// Usage:\n//   create component file (e.g. BlockiesIdenticon.js) using uncommented code below\n//   npm install blockies-identicon\n//   in the file you want to use the component (e.g. BlockiesIdenticon.js):\n//   import Blockies from \"blockies/react-component\";\n//   <Blockies opts={{seed: \"foo\", color: \"#dfe\", bgcolor: \"#a71\", size: 15, scale: 3, spotcolor: \"#000\"}}/>\n\nimport React from 'react';\nimport blockies from \"./blockies\";\n\nexport default class BlockiesIdenticon extends React.Component {\n  constructor(props) {\n    super(props);\n  }\n  getOpts () {\n    return {\n      seed: this.props.opts.seed || \"foo\",\n      color: this.props.opts.color || \"#dfe\",\n      bgcolor: this.props.opts.bgcolor || \"#a71\",\n      size: this.props.opts.size || 15,\n      scale: this.props.opts.scale || 3,\n      spotcolor: this.props.opts.spotcolor || \"#000\"\n    };\n  }\n  componentDidMount() {\n    this.draw();\n  }\n  componentDidUpdate(prevProps) {\n    // Check for prop change\n    if (this.props.seed !== prevProps.seed) {\n      this.draw();\n    }\n  }\n  draw() {\n    blockies.render({\n      seed: this.props.opts.seed,\n      size: this.props.opts.size,\n      scale: this.props.opts.scale\n    }, this.canvas);\n  }\n  render() {\n    return React.createElement(\"canvas\", {ref: canvas => this.canvas = canvas});\n  }\n}\n","import React from \"react\";\nimport { useWeb3React, UnsupportedChainIdError } from '@web3-react/core'\n\nimport styled, { css } from 'styled-components';\n\nimport Loader from 'react-loader-spinner'\nimport Blockies from \"components/BlockiesIdenticon\";\n//   <Blockies opts={{seed: \"foo\", color: \"#dfe\", bgcolor: \"#a71\", size: 15, scale: 3, spotcolor: \"#000\"}}/>\n\n// Create Header\nfunction Profile() {\n  const { active, error, account, library, chainId } = useWeb3React();\n\n  const [address, setAddress] = React.useState('');\n  const [ens, setENS] = React.useState('');\n  const [ensFetched, setENSFetched] = React.useState(false);\n\n  React.useEffect(() => {\n    if (account && account != '') {\n      // Check if the address is the same\n      if (address !== account) {\n        setENS('');\n        setENSFetched(false);\n\n        // get ens\n        library\n          .lookupAddress(account).then(function(name) {\n            setENS(name);\n            setENSFetched(true);\n            setAddress(account);\n          })\n          .catch(() => {\n            setENSFetched(true);\n            setAddress(account);\n          })\n      }\n\n    }\n  }, [account]);\n\n  // to create blockies\n\n  return (\n    <>\n    {account && account !== '' && !error &&\n      <Container>\n        <Blocky>\n          <BlockyInner>\n             <Blockies seed={account.toLowerCase()} opts={{seed: account.toLowerCase(), size: 7, scale: 7}}/>\n          </BlockyInner>\n        </Blocky>\n        <Wallet>\n        {!ensFetched &&\n          <Loader\n      \t     type=\"Oval\"\n      \t     color=\"#FFF\"\n      \t     height={16}\n      \t     width={16}\n      \t  />\n        }\n        {ensFetched && ens &&\n          <>{ens}</>\n        }\n        {ensFetched && !ens &&\n          <>{account.substring(0, 6)}.....{account.substring(account.length - 6)}</>\n        }\n        </Wallet>\n      </Container>\n    }\n    </>\n  );\n}\n\n// css styles\nconst Container = styled.button`\n  margin: 0;\n  padding: 0;\n  background: none;\n  border: 0;\n  outline: 0;\n  justify-content: flex-start;\n  flex: 1,\n  flex-direction: row;\n  align-items: center;\n  display: flex;\n`\n\nconst Blocky = styled.div`\n  position: relative;\n  width: 50px;\n  height: 50px;\n  border-radius: 100%;\n  overflow: hidden;\n  transform: scale(0.85);\n  outline-width: 2px;\n  outline-color: rgba(225,225,225,1);\n`\n\nconst BlockyInner = styled.div`\n`\n\nconst Wallet = styled.span`\n  margin: 0px 10px;\n  padding: 8px 15px;\n  height: 16px;\n  display: flex;\n  align-items: baseline;\n  justify-content: center;\n  font-weight: bold;\n  font-size: 14px;\n  color: #fff;\n  border-radius: 15px;\n  background: rgb(226,8,128);\n  background: linear-gradient(107deg, rgba(226,8,128,1) 30%, rgba(103,76,159,1) 70%, rgba(53,197,243,1) 100%);\n  &:hover {\n    opacity: 0.9;\n    cursor: pointer;\n    pointer: hand;\n  }\n  &:active {\n    opacity: 0.75;\n    cursor: pointer;\n    pointer: hand;\n  }\n`\n\n// Export Default\nexport default Profile;\n","import React from \"react\";\nimport styled, { css, keyframes } from 'styled-components';\nimport { AnimateOnChange } from 'react-animation';\n\n// Create Header\nfunction Bell({ badgeCount, bellPressedCB, width, height }) {\n  const [badge, setBadge] = React.useState(0);\n  const [ring, setRing] = React.useState(false);\n\n  React.useEffect(() => {\n    // Set new badge count and ring the bell\n    setBadge(badgeCount);\n\n    if (badge > 0) {\n      setResetRinger();\n    }\n  }, [badgeCount]);\n\n  const setResetRinger = () => {\n    setRing(true);\n\n    setTimeout(() => {\n        setRing(false)\n    }, 500);\n  }\n\n  return (\n    <Container\n      onClick={() => {\n        if (bellPressedCB) {bellPressedCB();}\n      }}\n      width={width}\n      height={height}\n    >\n      <BellImage ring={ring} src=\"./bell.png\" className=\"tadaaa\" ringme={ring} width={width} height={height} />\n      <BellImageAbs src=\"./bellball.png\" width={width} height={height} />\n      <BellImageAbs src=\"./ring.png\" width={width} height={height} />\n      {badge != 0 &&\n        <AnimateOnChange\n          animationIn=\"fadeIn\"\n          animationOut=\"fadeOut\"\n          durationOut={200}\n        >\n          <Badge>{badge}</Badge>\n        </AnimateOnChange>\n      }\n    </Container>\n  );\n}\n\n// css styles\nconst Container = styled.button`\n  border: 0;\n  outline: 0;\n  background: transparent;\n  border: 0;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  margin: 0 10px;\n  position: relative;\n  height: ${props => props.height || 40}px;\n  width: ${props => props.width || 40}px;\n  &:hover {\n    opacity: 0.9;\n    cursor: pointer;\n    pointer: hand;\n  }\n  &:active {\n    opacity: 0.75;\n    cursor: pointer;\n    pointer: hand;\n  }\n`\n\nconst tadaaa = keyframes`\n  0% {\n    -webkit-transform: scale3d(1, 1, 1);\n    -ms-transform: scale3d(1, 1, 1);\n    transform: scale3d(1, 1, 1);\n  }\n\n  10%, 20% {\n    -webkit-transform: scale3d(.98, .98, .98) rotate3d(0, 0, 1, -5deg);\n    -ms-transform: scale3d(.98, .98, .98) rotate3d(0, 0, 1, -5deg);\n    transform: scale3d(.98, .98, .98) rotate3d(0, 0, 1, -5deg);\n  }\n\n  30%, 50%, 70%, 90% {\n    -webkit-transform: scale3d(1.08, 1.08, 1.08) rotate3d(0, 0, 10, 5deg);\n    -ms-transform: scale3d(1.08, 1.08, 1.08) rotate3d(0, 0, 10, 5deg);\n    transform: scale3d(1.08, 1.08, 1.08) rotate3d(0, 0, 10, 5deg);\n  }\n\n  40%, 60%, 80% {\n    -webkit-transform: scale3d(1.08, 1.08, 1.08) rotate3d(0, 0, 1, -5deg);\n    -ms-transform: scale3d(1.08, 1.08, 1.08) rotate3d(0, 0, 1, -5deg);\n    transform: scale3d(1.08, 1.08, 1.08) rotate3d(0, 0, 1, -5deg);\n  }\n\n  100% {\n    -webkit-transform: scale3d(1, 1, 1);\n    -ms-transform: scale3d(1, 1, 1);\n    transform: scale3d(1, 1, 1);\n  }\n`;\n\nconst BellImage = styled.img`\n  position: absolute;\n  height: ${props => props.height || 40}px;\n  width: ${props => props.width || 40}px;\n\n  transition: transform .2s ease-out;\n  ${ props => props.ringme && css`\n    animation: ${tadaaa} 1s ease-out;\n  `};\n\n\n`\n\nconst BellImageAbs = styled(BellImage)`\n  left: 0,\n`\n\nconst Badge = styled.span`\n  position: absolute;\n  font-size: 10px;\n  color: #fff;\n  padding: 2px 4px;\n  border-radius: 100%;\n  background: rgba(208.0, 44.0, 30.0, 1.0);\n  top: 0px;\n  left: 5px;\n  font-weight: bold;\n`\n\n// Export Default\nexport default Bell;\n","import React from \"react\";\nimport { useWeb3React, UnsupportedChainIdError } from '@web3-react/core'\nimport {\n  NoEthereumProviderError,\n  UserRejectedRequestError as UserRejectedRequestErrorInjected\n} from '@web3-react/injected-connector'\n\nimport styled, { css } from 'styled-components';\n\nimport Profile from 'components/Profile';\nimport Bell from 'components/Bell';\n\n\n// Create Header\nfunction Header({ badgeCount, bellPressedCB }) {\n  const { active, error, account, chainId } = useWeb3React();\n  const randseed = new Array(4);\n\n  React.useEffect(() => {\n    if (account && account != '') {\n\n    }\n  }, [account]);\n\n  function getErrorMessage(error: Error) {\n    if (error instanceof NoEthereumProviderError) {\n      return 'Web3 not enabled, install MetaMask on desktop or visit from a dApp browser on mobile'\n    } else if (error instanceof UnsupportedChainIdError) {\n      return \"Unsupported Network, please connect to Ropsten\"\n    } else if (\n      error instanceof UserRejectedRequestErrorInjected\n    ) {\n      return 'Please authorize this website to access the dApp'\n    } else {\n      console.error(error)\n      return 'An unknown error occurred. Check the console for more details'\n    }\n  }\n\n  // to create blockies\n\n  return (\n    <HeaderStyle>\n      <ProfileContainer>\n      {active && !error &&\n        <Profile />\n      }\n      {!active &&\n        <Logo src=\"epns.png\" />\n      }\n      </ProfileContainer>\n      <UserControls>\n        {active && !error &&\n          <Bell\n            badgeCount={badgeCount}\n            bellPressedCB={bellPressedCB}\n            width={40}\n            height={40}\n          />\n        }\n      </UserControls>\n      <NetworkDisplayer>\n        {!!error &&\n          <PrimaryTheme>{getErrorMessage(error)}</PrimaryTheme>\n        }\n        {!active && !error &&\n          <ThirdTheme>Please connect to a Web3 Network</ThirdTheme>\n        }\n        <Connection phase={active ? 'active' : error ? 'error' : 'waiting'} />\n      </NetworkDisplayer>\n\n    </HeaderStyle>\n  );\n}\n\n// CSS Styles\nconst HeaderStyle = styled.div`\n  height: 100%;\n  padding: 10px 15px;\n  background: rgb(255,255,255);\n  background: linear-gradient(0deg, rgba(255,255,255,0) 0%, rgba(255,255,255,1) 21%);\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  justify-content: flex-end;\n`\n\nconst ProfileContainer = styled.div`\n  display: flex;\n  flex: 1;\n  justfy-content: flex-start;\n`\n\nconst Logo = styled.img`\n  height: 45px;\n`\n\nconst UserControls = styled.div`\n  display: flex;\n  justify-content: center;\n  align-items: center;\n`\n\nconst ImageButton = styled.button`\n\n`\n\nconst NetworkDisplayer = styled.div`\n  display: flex;\n  justify-content: center;\n  align-items: center;\n`\n\nconst Notice = styled.span`\n  border: 0;\n  outline: 0;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding: 8px 15px;\n  margin: 10px;\n  color: #fff;\n  border-radius: 20px;\n  font-size: 14px;\n`\n\nconst PrimaryTheme = styled(Notice)`\n  background: #e20880;\n`\n\nconst ThirdTheme = styled(Notice)`\n  background: #674c9f;\n`\n\nconst Connection = styled.span`\n  height: 10px;\n  width: 10px;\n  border-radius: 100%;\n  flex-shrink: 0;\n\n  ${props => props.phase === 'active' && css`\n    background: #77DD77;\n  `};\n\n  ${props => props.phase === 'waiting' && css`\n    background: #FFAE42;\n  `};\n\n  ${props => props.phase === 'error' && css`\n    background: #DC143C;\n  `};\n`\n\n// Export Default\nexport default Header;\n","import React from \"react\";\nimport ReactGA from 'react-ga';\n\nimport Loader from 'react-loader-spinner'\nimport styled from 'styled-components';\nimport { ToastContainer, toast } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.min.css';\n\nimport { AbstractConnector } from '@web3-react/abstract-connector'\nimport { Web3ReactProvider, useWeb3React, UnsupportedChainIdError } from '@web3-react/core'\nimport {\n  NoEthereumProviderError,\n  UserRejectedRequestError as UserRejectedRequestErrorInjected\n} from '@web3-react/injected-connector'\nimport { Web3Provider } from 'ethers/providers'\n\nimport { useEagerConnect, useInactiveListener } from 'hooks'\nimport {\n  injected,\n  portis,\n  network\n} from 'connectors'\nimport { addresses, abis } from \"@project/contracts\";\nimport { ethers } from \"ethers\";\n\nimport Home from 'pages/Home';\nimport Header from 'segments/Header';\n\nimport * as dotenv from \"dotenv\";\ndotenv.config();\n\nconst connectorsByName: { [name: string]: AbstractConnector } = {\n  Injected: injected,\n  Network: network,\n  Portis: portis\n}\n\nfunction getErrorMessage(error: Error) {\n  if (error instanceof NoEthereumProviderError) {\n    return 'No Ethereum browser extension detected, install MetaMask on desktop or visit from a dApp browser on mobile.'\n  } else if (error instanceof UnsupportedChainIdError) {\n    return \"You're connected to an unsupported network.\"\n  } else if (\n    error instanceof UserRejectedRequestErrorInjected\n  ) {\n    return 'Please authorize this website to access your Ethereum account.'\n  } else {\n    console.error(error)\n    return 'An unknown error occurred. Check the console for more details.'\n  }\n}\n\nfunction getLibrary(provider, connector) {\n  return new ethers.providers.Web3Provider(provider); // this will vary according to whether you use e.g. ethers or web3.js\n}\n\nexport default function() {\n  return (\n    <Web3ReactProvider getLibrary={getLibrary}>\n      <App />\n    </Web3ReactProvider>\n  )\n}\n\nfunction ChainId() {\n  const { chainId } = useWeb3React()\n\n  return (\n    <>\n      <span>Chain Id</span>\n      <span role=\"img\" aria-label=\"chain\">\n        \n      </span>\n      <span>{Number.isInteger(chainId) ? chainId : ''}</span>\n    </>\n  )\n}\n\nfunction BlockNumber() {\n  const { chainId, library } = useWeb3React()\n\n  const [blockNumber, setBlockNumber] = React.useState<number>()\n  React.useEffect((): any => {\n    if (!!library) {\n      let stale = false\n\n      library\n        .getBlockNumber()\n        .then((blockNumber: number) => {\n          if (!stale) {\n            setBlockNumber(blockNumber)\n          }\n        })\n        .catch(() => {\n          if (!stale) {\n            setBlockNumber(null)\n          }\n        })\n\n      const updateBlockNumber = (blockNumber: number) => {\n        setBlockNumber(blockNumber)\n      }\n      library.on('block', updateBlockNumber)\n\n      return () => {\n        stale = true\n        library.removeListener('block', updateBlockNumber)\n        setBlockNumber(undefined)\n      }\n    }\n  }, [library, chainId]) // ensures refresh if referential identity of library doesn't change across chainIds\n\n  return (\n    <>\n      <span>Block Number</span>\n      <span role=\"img\" aria-label=\"numbers\">\n        \n      </span>\n      <span>\n        {Number.isInteger(blockNumber)\n          ? blockNumber.toLocaleString()\n          : blockNumber === null\n          ? 'Error'\n          : !!library\n          ? '...'\n          : ''}\n      </span>\n    </>\n  )\n}\n\nfunction Account() {\n  const { account } = useWeb3React()\n\n  return (\n    <>\n      <span>Account</span>\n      <span role=\"img\" aria-label=\"robot\">\n        \n      </span>\n      <span>\n        {account === undefined\n          ? ''\n          : account === null\n          ? '-'\n          : `${account.substring(0, 6)}...${account.substring(account.length - 4)}`}\n      </span>\n    </>\n  )\n}\n\nfunction Balance() {\n  const { account, library, chainId } = useWeb3React()\n\n  const [balance, setBalance] = React.useState()\n  React.useEffect((): any => {\n    if (!!account && !!library) {\n      let stale = false\n\n      library\n        .getBalance(account)\n        .then((balance: any) => {\n          if (!stale) {\n            setBalance(balance)\n          }\n        })\n        .catch(() => {\n          if (!stale) {\n            setBalance(null)\n          }\n        })\n\n      return () => {\n        stale = true\n        setBalance(undefined)\n      }\n    }\n  }, [account, library, chainId]) // ensures refresh if referential identity of library doesn't change across chainIds\n\n  return (\n    <>\n      <span>Balance</span>\n      <span role=\"img\" aria-label=\"gold\">\n        \n      </span>\n      <span>\n        {!!balance\n          ? `${parseFloat(balance).toPrecision(4)}`\n          : balance === null\n          ? 'Error'\n          : account === null\n          ? '-'\n          : !!account && !!library\n          ? '...'\n          : ''}\n      </span>\n    </>\n  )\n}\n\nfunction HeaderOld() {\n  const { active, error } = useWeb3React()\n\n  return (\n    <>\n\n      <h5\n        style={{\n          display: 'grid',\n          gridGap: '0rem',\n          gridTemplateColumns: '1fr min-content 1fr',\n          maxWidth: '20rem',\n          lineHeight: '2rem',\n          margin: 'auto'\n        }}\n      >\n        <ChainId />\n        <BlockNumber />\n        <Account />\n        <Balance />\n      </h5>\n    </>\n  )\n}\n\nfunction initializeGA() {\n  ReactGA.initialize('231212683');\n  ReactGA.pageview('/homepage');\n}\n\nfunction App() {\n  const context = useWeb3React<Web3Provider>()\n  const { connector, library, chainId, account, activate, deactivate, active, error } = context\n\n  const [ badgeCount, setBadgeCount ] = React.useState(0);\n  const [ bellPressed, setBellPressed ] = React.useState(0);\n\n  // Initialize GA\n  ReactGA.initialize('UA-165415629-1');\n  ReactGA.pageview('/login');\n\n  // handle logic to recognize the connector currently being activated\n  const [activatingConnector, setActivatingConnector] = React.useState<AbstractConnector>()\n  React.useEffect(() => {\n    if (activatingConnector && activatingConnector === connector) {\n      setActivatingConnector(undefined)\n    }\n  }, [activatingConnector, connector])\n\n  // handle logic to eagerly connect to the injected ethereum provider, if it exists and has granted access already\n  const triedEager = useEagerConnect()\n\n  // handle logic to connect in reaction to certain events on the injected ethereum provider, if it exists\n  useInactiveListener(!triedEager || !!activatingConnector)\n\n  return (\n      <>\n        <HeaderContainer>\n          <Header\n            badgeCount={badgeCount}\n            bellPressedCB={() => {setBellPressed(bellPressed + 1)}}\n          />\n        </HeaderContainer>\n\n        <ParentContainer>\n        {(active) && !error && (\n          <HomeContainer>\n            <Home\n              setBadgeCount={setBadgeCount}\n              bellPressed={bellPressed}\n            />\n          </HomeContainer>\n\n        )}\n\n        {!active &&\n          <ProviderUpperContainer>\n            <ProviderLogo src=\"./epnsbell.png\" />\n            <ProviderContainer>\n              {Object.keys(connectorsByName).map(name => {\n                const currentConnector = connectorsByName[name]\n                const activating = currentConnector === activatingConnector\n                const connected = currentConnector === connector\n                const disabled = !triedEager || !!activatingConnector || connected || !!error\n                const image = name === 'Injected' ? './metamask.png' : name === 'Portis' ? './portis.png' : './ninja.png';\n\n                return (\n                  <ProviderButton\n                    disabled={disabled}\n                    key={name}\n                    onClick={() => {\n                      setActivatingConnector(currentConnector)\n                      activate(connectorsByName[name])\n                    }}\n                    border={name === 'Injected' ? '#e20880' : name === 'Portis' ? '#35c5f3' : '#674c9f'}\n                  >\n                    <ProviderImage src={image} />\n\n                    <ProviderLabel>\n                      {activating &&\n                        <Loader\n                           type=\"Oval\"\n                           color=\"#35c5f3\"\n                           height={20}\n                           width={20}\n                        />\n                      }\n                      {!activating &&\n                        <>\n                        {name === 'Injected' ? 'Connect with MetaMask' : name === 'Portis' ? 'Connect with Portis' : 'Login as Ninja'}\n                        </>\n                      }\n\n                    </ProviderLabel>\n\n                  </ProviderButton>\n                )\n              })}\n            </ProviderContainer>\n          </ProviderUpperContainer>\n        }\n\n        {active &&\n          <div\n            style={{\n              display: 'grid',\n              gridGap: '1rem',\n              gridTemplateColumns: 'fit-content',\n              maxWidth: '20rem',\n              margin: 'auto',\n              marginTop: '1200px'\n            }}\n          >\n            {(active || error) && (\n              <button\n                style={{\n                  height: '3rem',\n                  marginTop: '2rem',\n                  borderRadius: '1rem',\n                  borderColor: 'red',\n                  cursor: 'pointer'\n                }}\n                onClick={() => {\n                  deactivate()\n                }}\n              >\n                Deactivate\n              </button>\n            )}\n\n            {!!(library && account) && (\n              <button\n                style={{\n                  height: '3rem',\n                  borderRadius: '1rem',\n                  cursor: 'pointer'\n                }}\n                onClick={() => {\n                  library\n                    .getSigner(account)\n                    .signMessage('')\n                    .then((signature: any) => {\n                      window.alert(`Success!\\n\\n${signature}`)\n                    })\n                    .catch((error: any) => {\n                      window.alert('Failure!' + (error && error.message ? `\\n\\n${error.message}` : ''))\n                    })\n                }}\n              >\n                Sign Message\n              </button>\n            )}\n            {!!(connector === network && chainId) && (\n              <button\n                style={{\n                  height: '3rem',\n                  borderRadius: '1rem',\n                  cursor: 'pointer'\n                }}\n                onClick={() => {\n                  ;(connector as any).changeChainId(chainId === 1 ? 3 : 1)\n                }}\n              >\n                Switch Networks\n              </button>\n            )}\n            {connector === portis && (\n              <>\n                {chainId !== undefined && (\n                  <button\n                    style={{\n                      height: '3rem',\n                      borderRadius: '1rem',\n                      cursor: 'pointer'\n                    }}\n                    onClick={() => {\n                      ;(connector as any).changeNetwork(chainId === 1 ? 100 : 1)\n                    }}\n                  >\n                    Switch Networks\n                  </button>\n                )}\n                <button\n                  style={{\n                    height: '3rem',\n                    borderRadius: '1rem',\n                    cursor: 'pointer'\n                  }}\n                  onClick={() => {\n                    ;(connector as any).close()\n                  }}\n                >\n                  Kill Portis Session\n                </button>\n              </>\n            )}\n          </div>\n        }\n        </ParentContainer>\n\n        <ToastContainer\n          position=\"bottom-right\"\n          autoClose={false}\n          newestOnTop\n          closeOnClick\n          rtl={false}\n          pauseOnFocusLoss\n          draggable\n        />\n      </>\n  );\n}\n\n\n// CSS STYLES\nconst HeaderContainer = styled.div`\n  height: 55px;\n  left: 0;\n  right: 0;\n  width: 100%;\n  position: fixed;\n  top: 0;\n  z-index: 999;\n`\n\nconst ParentContainer = styled.div`\n  flex-wrap: wrap;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  margin: 80px 20px 20px 20px;\n  flex: 1;\n`\n\nconst HomeContainer = styled.div`\n  display: flex;\n  flex: 1;\n  align-self: center;\n  width: 100%;\n  max-width: 940px;\n`\n\nconst ProviderUpperContainer = styled.div`\n  display: flex;\n  flex: 1,\n  align-self: center;\n  flex-direction: column;\n`\n\nconst ProviderLogo = styled.img`\n  width: 15vw;\n  align-self: center;\n  display: flex;\n  margin: 20px;\n  min-width: 200px;\n`\n\nconst ProviderContainer = styled.div`\n  flex-wrap: wrap;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n`\n\nconst ProviderButton = styled.button`\n  flex: 1 1 0;\n  min-width: 200px;\n  background: #fff;\n  outline: 0;\n  max-width: 200px;\n\n  box-shadow: 0px 15px 20px -5px rgba(0, 0, 0, 0.1);\n  border-radius: 15px;\n  border: 1px solid rgb(225,225,225);\n\n  margin: 20px;\n  overflow: hidden;\n\n  display: flex;\n  align-items: center;\n  justify-content: center;\n\n  display: flex;\n  flex-direction: column;\n  padding: 10px;\n\n  &:hover {\n    opacity: 0.9;\n    cursor: pointer;\n    pointer: hand;\n    border: 1px solid ${props => props.border}\n  }\n  &:active {\n    opacity: 0.75;\n    cursor: pointer;\n    pointer: hand;\n    border: 1px solid ${props => props.border}\n  }\n`\n\nconst ProviderImage = styled.img`\n  height: 60px;\n  padding: 10px;\n`\n\nconst ProviderLabel = styled.span`\n  font-size: 12px;\n  margin: 5px;\n`\n\nconst StyledContainer = styled(ToastContainer).attrs({\n  // custom props\n})`\n  .Toastify__toast-container {}\n  .Toastify__toast {}\n  .Toastify__toast--error {}\n  .Toastify__toast--warning {}\n  .Toastify__toast--success {}\n  .Toastify__toast-body {\n    font-size: 12px;\n  }\n  .Toastify__progress-bar {}\n`;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === \"localhost\" ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === \"[::1]\" ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/),\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === \"production\" && \"serviceWorker\" in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener(\"load\", () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            \"This web app is being served cache-first by a service \" +\n              \"worker. To learn more, visit https://bit.ly/CRA-PWA\",\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === \"installed\") {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                \"New content is available and will be used when all \" +\n                  \"tabs for this page are closed. See https://bit.ly/CRA-PWA.\",\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log(\"Content is cached for offline use.\");\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error(\"Error during service worker registration:\", error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { \"Service-Worker\": \"script\" },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get(\"content-type\");\n      if (response.status === 404 || (contentType != null && contentType.indexOf(\"javascript\") === -1)) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\"No internet connection found. App is running in offline mode.\");\n    });\n}\n\nexport function unregister() {\n  if (\"serviceWorker\" in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport ApolloClient from \"apollo-boost\";\nimport { ApolloProvider } from \"@apollo/react-hooks\";\n\nimport './index.css';\n\nimport App from \"./App\";\nimport * as serviceWorker from \"./serviceWorker\";\n\nimport { Web3ReactProvider } from '@web3-react/core'\nimport { ethers } from \"ethers\";\n\nimport * as dotenv from \"dotenv\";\ndotenv.config();\n\n// You should replace this uri with your own and put it into a .env file\nconst client = new ApolloClient({\n  uri: \"https://api.thegraph.com/subgraphs/name/paulrberg/create-eth-app\",\n});\n\nReactDOM.render(\n\n    <ApolloProvider client={client}>\n      <App />\n    </ApolloProvider>,\n    document.getElementById(\"root\"),\n\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","(function() {\n\t// The random number is a js implementation of the Xorshift PRNG\n\tvar randseed = new Array(4); // Xorshift: [x, y, z, w] 32 bit values\n\n\tfunction seedrand(seed) {\n\t\tfor (var i = 0; i < randseed.length; i++) {\n\t\t\trandseed[i] = 0;\n\t\t}\n\t\tfor (var i = 0; i < seed.length; i++) {\n\t\t\trandseed[i%4] = ((randseed[i%4] << 5) - randseed[i%4]) + seed.charCodeAt(i);\n\t\t}\n\t}\n\n\tfunction rand() {\n\t\t// based on Java's String.hashCode(), expanded to 4 32bit values\n\t\tvar t = randseed[0] ^ (randseed[0] << 11);\n\n\t\trandseed[0] = randseed[1];\n\t\trandseed[1] = randseed[2];\n\t\trandseed[2] = randseed[3];\n\t\trandseed[3] = (randseed[3] ^ (randseed[3] >> 19) ^ t ^ (t >> 8));\n\n\t\treturn (randseed[3]>>>0) / ((1 << 31)>>>0);\n\t}\n\n\tfunction createColor() {\n\t\t//saturation is the whole color spectrum\n\t\tvar h = Math.floor(rand() * 360);\n\t\t//saturation goes from 40 to 100, it avoids greyish colors\n\t\tvar s = ((rand() * 60) + 40) + '%';\n\t\t//lightness can be anything from 0 to 100, but probabilities are a bell curve around 50%\n\t\tvar l = ((rand()+rand()+rand()+rand()) * 25) + '%';\n\n\t\tvar color = 'hsl(' + h + ',' + s + ',' + l + ')';\n\t\treturn color;\n\t}\n\n\tfunction createImageData(size) {\n\t\tvar width = size; // Only support square icons for now\n\t\tvar height = size;\n\n\t\tvar dataWidth = Math.ceil(width / 2);\n\t\tvar mirrorWidth = width - dataWidth;\n\n\t\tvar data = [];\n\t\tfor(var y = 0; y < height; y++) {\n\t\t\tvar row = [];\n\t\t\tfor(var x = 0; x < dataWidth; x++) {\n\t\t\t\t// this makes foreground and background color to have a 43% (1/2.3) probability\n\t\t\t\t// spot color has 13% chance\n\t\t\t\trow[x] = Math.floor(rand()*2.3);\n\t\t\t}\n\t\t\tvar r = row.slice(0, mirrorWidth);\n\t\t\tr.reverse();\n\t\t\trow = row.concat(r);\n\n\t\t\tfor(var i = 0; i < row.length; i++) {\n\t\t\t\tdata.push(row[i]);\n\t\t\t}\n\t\t}\n\n\t\treturn data;\n\t}\n\n\tfunction buildOpts(opts) {\n\t\tvar newOpts = {};\n\n\t\tnewOpts.seed = opts.seed || Math.floor((Math.random()*Math.pow(10,16))).toString(16);\n\n\t\tseedrand(newOpts.seed);\n\n\t\tnewOpts.size = opts.size || 8;\n\t\tnewOpts.scale = opts.scale || 4;\n\t\tnewOpts.color = opts.color || createColor();\n\t\tnewOpts.bgcolor = opts.bgcolor || createColor();\n\t\tnewOpts.spotcolor = opts.spotcolor || createColor();\n\n\t\treturn newOpts;\n\t}\n\n\tfunction renderIcon(opts, canvas) {\n\t\topts = buildOpts(opts || {});\n\t\tvar imageData = createImageData(opts.size);\n\t\tvar width = Math.sqrt(imageData.length);\n\n\t\tcanvas.width = canvas.height = opts.size * opts.scale;\n\n\t\tvar cc = canvas.getContext('2d');\n\t\tcc.fillStyle = opts.bgcolor;\n\t\tcc.fillRect(0, 0, canvas.width, canvas.height);\n\t\tcc.fillStyle = opts.color;\n\n\t\tfor(var i = 0; i < imageData.length; i++) {\n\n\t\t\t// if data is 0, leave the background\n\t\t\tif(imageData[i]) {\n\t\t\t\tvar row = Math.floor(i / width);\n\t\t\t\tvar col = i % width;\n\n\t\t\t\t// if data is 2, choose spot color, if 1 choose foreground\n\t\t\t\tcc.fillStyle = (imageData[i] == 1) ? opts.color : opts.spotcolor;\n\n\t\t\t\tcc.fillRect(col * opts.scale, row * opts.scale, opts.scale, opts.scale);\n\t\t\t}\n\t\t}\n\t\treturn canvas;\n\t}\n\n\tfunction createIcon(opts) {\n\t\tvar canvas = document.createElement('canvas');\n\n\t\trenderIcon(opts, canvas);\n\n\t\treturn canvas;\n\t}\n\n\tvar api = {\n\t\tcreate: createIcon,\n\t\trender: renderIcon\n\t};\n\n\tif (typeof module !== \"undefined\") {\n\t\tmodule.exports = api;\n\t}\n\tif (typeof window !== \"undefined\") {\n\t\t window.blockies = api;\n\t}\n\n})();\n"],"sourceRoot":""}